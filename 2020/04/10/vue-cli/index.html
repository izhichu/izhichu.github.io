<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>vue-cli | izhichu的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Vue项目1.1. 程序演示1.1.1 服务器12341.在vuecms3_nodejsapi目录下运行npm install安装依赖2.打开wamp，使用sqlyog执行dtcmsdb4.sql3.打开src&#x2F;app.js，修改连接数据库的配置   app.use(orm.express(&amp;#x27;mysql:&#x2F;&#x2F;root:@127.0.0.1:3306&#x2F;dtcmsdb4&amp;#x27;4.点击s">
<meta property="og:type" content="article">
<meta property="og:title" content="vue-cli">
<meta property="og:url" content="http://example.com/2020/04/10/vue-cli/index.html">
<meta property="og:site_name" content="izhichu的博客">
<meta property="og:description" content="Vue项目1.1. 程序演示1.1.1 服务器12341.在vuecms3_nodejsapi目录下运行npm install安装依赖2.打开wamp，使用sqlyog执行dtcmsdb4.sql3.打开src&#x2F;app.js，修改连接数据库的配置   app.use(orm.express(&amp;#x27;mysql:&#x2F;&#x2F;root:@127.0.0.1:3306&#x2F;dtcmsdb4&amp;#x27;4.点击s">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548217691062.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548290537572.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562661036910.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562661053769.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562661089819.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/header.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1550553697639.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548327621203.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548328057624.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548060310388.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659660768.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659675821.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659691462.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659850480.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659946234.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1545632333540.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1545632442993.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1545633027495.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562834131072.png">
<meta property="og:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562834221839.png">
<meta property="article:published_time" content="2020-04-10T06:46:44.000Z">
<meta property="article:modified_time" content="2020-11-30T07:32:51.568Z">
<meta property="article:author" content="izhichu">
<meta property="article:tag" content="vue项目">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="d:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548217691062.png">
  
    <link rel="alternate" href="/atom.xml" title="izhichu的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/plugin/bganimation/bg.css">

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" rel="stylesheet" type="text/css">
<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://avatars0.githubusercontent.com/u/20333903?v=3&amp;s=460">
    <h2 class="author">izhichu</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>4</strong><br>文章</div></a>
      <a href="/categories"><div><strong>0</strong><br>分类</div></a>
      <a href="/tags"><div><strong>4</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main"><article id="post-vue-cli" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/10/vue-cli/" class="article-date">
  <time class="post-time" datetime="2020-04-10T06:46:44.000Z" itemprop="datePublished">
    <span class="post-month">4月</span><br/>
    <span class="post-day">10</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      vue-cli
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Vue项目"><a href="#Vue项目" class="headerlink" title="Vue项目"></a>Vue项目</h1><h2 id="1-1-程序演示"><a href="#1-1-程序演示" class="headerlink" title="1.1. 程序演示"></a>1.1. 程序演示</h2><h3 id="1-1-1-服务器"><a href="#1-1-1-服务器" class="headerlink" title="1.1.1 服务器"></a>1.1.1 服务器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>在vuecms3_nodejsapi目录下运行npm install安装依赖</span><br><span class="line"><span class="number">2.</span>打开wamp，使用sqlyog执行dtcmsdb4.sql</span><br><span class="line"><span class="number">3.</span>打开src/app.js，修改连接数据库的配置   app.use(orm.express(<span class="string">&#x27;mysql://root:@127.0.0.1:3306/dtcmsdb4&#x27;</span></span><br><span class="line"><span class="number">4.</span>点击src/start.bat，启动服务器项目</span><br></pre></td></tr></table></figure>

<h3 id="1-1-2-客户端"><a href="#1-1-2-客户端" class="headerlink" title="1.1.2 客户端"></a>1.1.2 客户端</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 执行npm install安装依赖</span><br><span class="line"><span class="number">2.</span> 执行npm run dev执行</span><br></pre></td></tr></table></figure>

<h2 id="1-2-vue-cli使用"><a href="#1-2-vue-cli使用" class="headerlink" title="1.2.vue-cli使用"></a>1.2.vue-cli使用</h2><p>vue-cli是vue官网提供的一个脚手架，这个构建工具大大降低了webpack的使用难度，支持热更新，有<strong>webpack-dev-server</strong>的支持，相当于启动了一个请求服务器，给你搭建了一个测试环境，只关注开发就OK</p>
<h3 id="1-2-1-安装vue-cli创建项目"><a href="#1-2-1-安装vue-cli创建项目" class="headerlink" title="1.2.1 安装vue-cli创建项目"></a>1.2.1 安装vue-cli创建项目</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.npm install -g @vue&#x2F;cli@3.9.1</span><br><span class="line">2.将配置环境变量  C:\dev\nodejs</span><br><span class="line">3.vue create project-name</span><br></pre></td></tr></table></figure>

<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548217691062.png" alt="1548217691062"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查看最终生效的 webpack 配置信息</span></span><br><span class="line">vue inspect &gt; output.js</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置文件参考文档</span></span><br><span class="line">https:<span class="comment">//cli.vuejs.org/zh/config/#devserver-proxy</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//运行App</span></span><br><span class="line">npm run serve</span><br><span class="line"></span><br><span class="line"><span class="comment">//编译App</span></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548290537572.png" alt="1548290537572"></p>
<h3 id="1-2-2-windows-32位-npm装不上vue-cli的问题"><a href="#1-2-2-windows-32位-npm装不上vue-cli的问题" class="headerlink" title="1.2.2 windows(32位) npm装不上vue/cli的问题"></a>1.2.2 windows(32位) npm装不上vue/cli的问题</h3><p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562661036910.png" alt="1562661036910"></p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562661053769.png" alt="1562661053769"></p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562661089819.png" alt="1562661089819"></p>
<h3 id="1-2-3-vue-config-js配置"><a href="#1-2-3-vue-config-js配置" class="headerlink" title="1.2.3 vue.config.js配置"></a>1.2.3 vue.config.js配置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//官网配置： https://cli.vuejs.org/zh/config/#filenamehashing</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> debug = process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//部署应用包时的基本URL，如果是生产环境，部署到 /cli-study/dist 路径；如果是开发环境，部署到根路径</span></span><br><span class="line">  publicPath: !debug</span><br><span class="line">      ? <span class="string">&#x27;/cli-study/dist&#x27;</span></span><br><span class="line">      : <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  <span class="comment">//输出文件路径</span></span><br><span class="line">  outputDir: <span class="string">&#x27;dist&#x27;</span>,</span><br><span class="line">  <span class="comment">//放置生成的静态资源 (js、css、img、fonts) 的 (相对于 outputDir 的) 目录。</span></span><br><span class="line">  assetsDir: <span class="string">&#x27;static&#x27;</span>,</span><br><span class="line">  <span class="comment">//默认情况下，生成的静态资源在它们的文件名中包含了 hash 以便更好的控制缓存</span></span><br><span class="line">  filenameHashing: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// eslint-loader 是否在保存的时候检查</span></span><br><span class="line">  lintOnSave: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// 是否使用包含运行时编译器的Vue构建版本，设置为 true 后你就可以在 Vue 组件中使用 template 选项了，但是这会让你的应用额外增加 10kb 左右。</span></span><br><span class="line">  runtimeCompiler: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// 默认情况下 babel-loader 会忽略所有 node_modules 中的文件。如果你想要通过 Babel 显式转译一个依赖，可以在这个选项中列出来。</span></span><br><span class="line">  transpileDependencies: [],</span><br><span class="line">  <span class="comment">// 生产环境不需要sourceMap</span></span><br><span class="line">  productionSourceMap: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 官网：https://cli.vuejs.org/zh/guide/webpack.html#%E7%AE%80%E5%8D%95%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F</span></span><br><span class="line">  <span class="comment">// 更多配置参考：https://www.jb51.net/article/150844.htm</span></span><br><span class="line">  configureWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">Object</span>.assign(config, &#123; <span class="comment">// 开发生产共同配置</span></span><br><span class="line">      resolve: &#123;</span><br><span class="line">        alias: &#123;</span><br><span class="line">          <span class="string">&#x27;@&#x27;</span>: path.resolve(__dirname, <span class="string">&#x27;./src&#x27;</span>),</span><br><span class="line">          <span class="string">&#x27;vue$&#x27;</span>: <span class="string">&#x27;vue/dist/vue.esm.js&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// webpack的链式操作，允许对内部的 webpack 配置进行更细粒度的修改</span></span><br><span class="line">  <span class="comment">// 参考： https://cli.vuejs.org/zh/guide/webpack.html#%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C-%E9%AB%98%E7%BA%A7</span></span><br><span class="line">  chainWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (debug) &#123;</span><br><span class="line">      <span class="comment">// 本地开发配置</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 生产开发配置</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// css的相关配置</span></span><br><span class="line">  css: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//所有 webpack-dev-server 的选项都支持</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    host: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    port: <span class="number">3000</span>,</span><br><span class="line">    https: <span class="literal">false</span>,</span><br><span class="line">    hotOnly: <span class="literal">false</span>,</span><br><span class="line">    proxy: <span class="literal">null</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 第三方插件配置</span></span><br><span class="line">  pluginOptions: &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-4-vue-cli搭建项目"><a href="#1-2-4-vue-cli搭建项目" class="headerlink" title="1.2.4 vue-cli搭建项目"></a>1.2.4 vue-cli搭建项目</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create project_name</span><br></pre></td></tr></table></figure>

<h3 id="1-2-5-Eslint格式化-vue文件"><a href="#1-2-5-Eslint格式化-vue文件" class="headerlink" title="1.2.5 Eslint格式化.vue文件"></a>1.2.5 Eslint格式化.vue文件</h3><p>ESLint是一个用来识别 ECMAScript 并且按照规则给出报告的代码检测工具，使用它可以避免低级错误和统一代码的风格。</p>
<p>你可能有疑问，在.vue 文件中你怎么检验你的代码，因为它不是 JavaScript。我们假设你使用 <a target="_blank" rel="noopener" href="https://eslint.org/">ESLint</a> (如果你没有使用话，你应该去使用！)。</p>
<p>你还需要官方的 <a target="_blank" rel="noopener" href="https://github.com/vuejs/eslint-plugin-vue">eslint-plugin-vue</a>，它支持同时检查你.vue文件中的模板和脚本。</p>
<p><a target="_blank" rel="noopener" href="https://vue-loader-v14.vuejs.org/zh-cn/workflow/linting.html">https://vue-loader-v14.vuejs.org/zh-cn/workflow/linting.html</a></p>
<h4 id="a-eslint配置-rules规则"><a href="#a-eslint配置-rules规则" class="headerlink" title="a) eslint配置(rules规则)"></a>a) eslint配置(rules规则)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关闭必须使用单引号</span></span><br><span class="line"><span class="string">&quot;quotes&quot;</span>: [<span class="number">0</span>, <span class="string">&quot;single&quot;</span>],</span><br><span class="line"><span class="comment">// 允许多余的换行</span></span><br><span class="line"><span class="string">&quot;no-multi-spaces&quot;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;no-console&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;error&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;no-debugger&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;error&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;prefer-promise-reject-errors&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">&#x27;space-unary-ops&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">&#x27;no-unused-expressions&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">&#x27;no-useless-return&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">&#x27;standard/no-callback-literal&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">&#x27;import/first&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">&#x27;import/export&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">&#x27;no-mixed-operators&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"><span class="string">&#x27;no-use-before-define&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不允许使用分号</span></span><br><span class="line"><span class="string">&#x27;semi&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 允许使用==</span></span><br><span class="line"><span class="string">&#x27;eqeqeq&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 缩进使用不做限制</span></span><br><span class="line"><span class="string">&#x27;indent&#x27;</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 允许使用tab</span></span><br><span class="line"><span class="string">&#x27;no-tabs&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数圆括号之前没有空格</span></span><br><span class="line"><span class="string">&#x27;space-before-function-paren&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不要求块内空格填充格式</span></span><br><span class="line"><span class="string">&#x27;padded-blocks&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不限制变量一起声明</span></span><br><span class="line"><span class="string">&#x27;one-var&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 条件语句中复制操作符需要用圆括号括起来</span></span><br><span class="line"><span class="string">&#x27;no-cond-assign&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;except-parens&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 允许使用条件表达式使用常量</span></span><br><span class="line"><span class="string">&#x27;no-constant-condition&#x27;</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 单行可忽略大括号，多行不可忽略</span></span><br><span class="line"><span class="string">&#x27;curly&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;multi-line&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不允许使用var变量</span></span><br><span class="line"><span class="string">&#x27;no-var&#x27;</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不允许出现多个空格</span></span><br><span class="line"><span class="string">&#x27;no-multi-spaces&#x27;</span>: [<span class="string">&#x27;error&#x27;</span>, &#123; <span class="attr">ignoreEOLComments</span>: <span class="literal">true</span> &#125;],</span><br><span class="line"><span class="string">&#x27;camelcase&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象字面量的键值空格风格</span></span><br><span class="line"><span class="string">&#x27;key-spacing&#x27;</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// if语句包含一个return语句， else就多余</span></span><br><span class="line"><span class="string">&#x27;no-else-return&#x27;</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 建议将经常出现的数字提取为变量</span></span><br><span class="line"><span class="string">&#x27;no-magic-numbers&#x27;</span>: [<span class="number">0</span>, &#123; <span class="attr">ignoreArrayIndexes</span>: <span class="literal">true</span> &#125;],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不允许重复声明变量</span></span><br><span class="line"><span class="string">&#x27;no-redeclare&#x27;</span>: [<span class="number">2</span>, &#123; <span class="attr">builtinGlobals</span>: <span class="literal">true</span> &#125;],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 立即执行函数风格</span></span><br><span class="line"><span class="string">&#x27;wrap-iife&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;inside&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不允许圆括号中出现空格</span></span><br><span class="line"><span class="string">&#x27;space-in-parens&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 确保运算符周围有空格</span></span><br><span class="line"><span class="string">&#x27;space-infix-ops&#x27;</span>: <span class="number">2</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 强制点号与属性同一行</span></span><br><span class="line"><span class="string">&#x27;dot-location&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;property&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 强制单行代码使用空格</span></span><br><span class="line"><span class="string">&#x27;block-spacing&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;always&#x27;</span>],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 约束for-in使用hasOwnProperty判断</span></span><br><span class="line"><span class="string">&#x27;guard-for-in&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 采用one true brace style大括号风格</span></span><br><span class="line"><span class="string">&#x27;brace-style&#x27;</span>: [<span class="number">2</span>, <span class="string">&#x27;1tbs&#x27;</span>, &#123; <span class="string">&#x27;allowSingleLine&#x27;</span>: <span class="literal">true</span> &#125;],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 统一逗号周围空格风格</span></span><br><span class="line"><span class="string">&#x27;comma-spacing&#x27;</span>: [<span class="number">2</span>, &#123; <span class="string">&#x27;before&#x27;</span>: <span class="literal">false</span>, <span class="string">&#x27;after&#x27;</span>: <span class="literal">true</span> &#125;],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 禁止出现多个空行</span></span><br><span class="line"><span class="string">&#x27;no-multiple-empty-lines&#x27;</span>: [<span class="number">2</span>, &#123; <span class="string">&#x27;max&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;maxEOF&#x27;</span>: <span class="number">2</span> &#125;],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 允许箭头函数不使用圆括号</span></span><br><span class="line"><span class="string">&#x27;arrow-parens&#x27;</span>: <span class="number">0</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 规范generator函数的使用</span></span><br><span class="line"><span class="string">&#x27;generator-star-spacing&#x27;</span>: [<span class="number">2</span>, &#123; <span class="string">&#x27;before&#x27;</span>: <span class="literal">false</span>, <span class="string">&#x27;after&#x27;</span>: <span class="literal">true</span> &#125;],</span><br><span class="line"></span><br><span class="line"><span class="comment">// 要求在块级</span></span><br><span class="line"><span class="string">&#x27;lines-around-comment&#x27;</span>: [<span class="number">2</span>, &#123; <span class="string">&#x27;beforeBlockComment&#x27;</span>: <span class="literal">true</span>, <span class="string">&#x27;afterBlockComment&#x27;</span>: <span class="literal">false</span>, <span class="string">&#x27;beforeLineComment&#x27;</span>: <span class="literal">true</span>, <span class="string">&#x27;afterLineComment&#x27;</span>: <span class="literal">false</span> &#125;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;off&quot;</span>或者<span class="number">0</span>，不启用这个规则</span><br><span class="line"><span class="string">&quot;warn&quot;</span>或者<span class="number">1</span>，出现问题会有警告</span><br><span class="line"><span class="string">&quot;error&quot;</span>或者<span class="number">2</span>，出现问题会报错</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/vuejs/eslint-plugin-vue/blob/master/docs/rules/README.md">https://github.com/vuejs/eslint-plugin-vue/blob/master/docs/rules/README.md</a></p>
<blockquote>
<p>注意：”extends”: “plugin:vue/recommended” 会同时检查js和模板的语法错误</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vscode中通过  npm run lint会自动进行eslint的校验和修正</span><br><span class="line">npm run lint --fix</span><br></pre></td></tr></table></figure>

<h2 id="1-3-项目完成"><a href="#1-3-项目完成" class="headerlink" title="1.3 项目完成"></a>1.3 项目完成</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i vant -S</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-1-App主框架"><a href="#1-3-1-App主框架" class="headerlink" title="1.3.1 App主框架"></a>1.3.1 App主框架</h3><p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/header.png" alt="header"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line">#1. 修改App.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">    &lt;van-nav-bar title=<span class="string">&quot;标题&quot;</span> fixed&gt;</span><br><span class="line">      &lt;van-icon name=<span class="string">&quot;arrow-left&quot;</span> slot=<span class="string">&quot;left&quot;</span> /&gt;</span><br><span class="line">    &lt;/van-nav-bar&gt;</span><br><span class="line"></span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line"></span><br><span class="line">    &lt;van-tabbar v-model=<span class="string">&quot;active&quot;</span> active-color=<span class="string">&quot;#26a2ff&quot;</span>&gt;</span><br><span class="line">      &lt;van-tabbar-item to=<span class="string">&quot;/&quot;</span> icon=<span class="string">&quot;home-o&quot;</span>&gt;首页&lt;/van-tabbar-item&gt;</span><br><span class="line">      &lt;van-tabbar-item to=<span class="string">&quot;/member&quot;</span> icon=<span class="string">&quot;friends-o&quot;</span>&gt;会员&lt;/van-tabbar-item&gt;</span><br><span class="line">      &lt;van-tabbar-item to=<span class="string">&quot;/cart&quot;</span> &gt;</span><br><span class="line">        &lt;van-goods-action-icon id=<span class="string">&quot;badge&quot;</span> icon=<span class="string">&quot;cart-o&quot;</span> text=<span class="string">&quot;购物车&quot;</span> info=<span class="string">&quot;5&quot;</span> /&gt;</span><br><span class="line">      &lt;/van-tabbar-item&gt;</span><br><span class="line">      &lt;van-tabbar-item to=<span class="string">&quot;/search&quot;</span> icon=<span class="string">&quot;search&quot;</span>&gt;搜索&lt;/van-tabbar-item&gt;</span><br><span class="line">    &lt;/van-tabbar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      active: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span>&gt;</span><br><span class="line">* &#123;</span><br><span class="line">  margin: 0px;</span><br><span class="line">  padding: 0px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#app &#123;</span><br><span class="line">  padding-top: 46px;</span><br><span class="line">  padding-bottom: 50px;</span><br><span class="line">  <span class="comment">/*避免PC端网页在页面切换的时候出现的水平滚动条*/</span></span><br><span class="line">  overflow: hidden;</span><br><span class="line"></span><br><span class="line">  .van-tabbar &#123;</span><br><span class="line">    border-top: 1px solid #ccc;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    .van-tabbar-item--active &#123;</span><br><span class="line">      background-color: #eaeaea;</span><br><span class="line">    &#125;</span><br><span class="line">     <span class="comment">/*去除徽标背景色*/</span></span><br><span class="line">    .van-goods-action-icon&#123;</span><br><span class="line">      background-color: transparent;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .van-nav-bar &#123;</span><br><span class="line">    background-color: #26a2ff !important;</span><br><span class="line">    .van-nav-bar__title &#123;</span><br><span class="line">      color: white !important;</span><br><span class="line">    &#125;</span><br><span class="line">    .van-nav-bar__left &#123;</span><br><span class="line">      .van-icon &#123;</span><br><span class="line">        color: white !important;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2. main.js引入Vant，导入并挂载路由</span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.引入Vant UI</span></span><br><span class="line"><span class="keyword">import</span> Vant <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;vant/lib/index.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.引入路由</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line">Vue.use(Vant);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.创建vue实例</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.router.js</span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入对应的路由组件</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&quot;../views/Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Member <span class="keyword">from</span> <span class="string">&quot;../views/Member.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Cart <span class="keyword">from</span> <span class="string">&quot;../views/Cart.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Search <span class="keyword">from</span> <span class="string">&quot;../views/Search.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 创建路由对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      component: Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/member&quot;</span>,</span><br><span class="line">      component: Member</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/cart&quot;</span>,</span><br><span class="line">      component: Cart</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/search&quot;</span>,</span><br><span class="line">      component: Search</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#4.新建路由模块</span><br><span class="line">新建views/Home.vue</span><br><span class="line">新建views/Member.vue</span><br><span class="line">新建views/Cart.vue</span><br><span class="line">新建views/Search.vue</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-2-首页模块"><a href="#1-3-2-首页模块" class="headerlink" title="1.3.2 首页模块"></a>1.3.2 首页模块</h3><h4 id="a-首页轮播图"><a href="#a-首页轮播图" class="headerlink" title="a) 首页轮播图"></a>a) 首页轮播图</h4><p><strong>页面</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#1.Home.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;home&quot;</span>&gt;</span><br><span class="line">    &lt;van-swipe <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;my-swipe&quot;</span> :autoplay=<span class="string">&quot;3000&quot;</span> indicator-color=<span class="string">&quot;white&quot;</span>&gt;</span><br><span class="line">      &lt;van-swipe-item&gt;<span class="number">1</span>&lt;/van-swipe-item&gt;</span><br><span class="line">      &lt;van-swipe-item&gt;<span class="number">2</span>&lt;/van-swipe-item&gt;</span><br><span class="line">      &lt;van-swipe-item&gt;<span class="number">3</span>&lt;/van-swipe-item&gt;</span><br><span class="line">      &lt;van-swipe-item&gt;<span class="number">4</span>&lt;/van-swipe-item&gt;</span><br><span class="line">    &lt;/van-swipe&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span>&gt;</span><br><span class="line">.my-swipe .van-swipe-item &#123;</span><br><span class="line">  color: #fff;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">  line-height: 200px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  background-color: #39a9ed;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>图片轮播数据</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">#1.安装axios</span><br><span class="line">npm install axios</span><br><span class="line"></span><br><span class="line">#2.启动node服务器</span><br><span class="line">开启mysql服务，导入数据</span><br><span class="line">开启node服务器： vuecms3_nodejsapi下的src下的start.bat</span><br><span class="line"></span><br><span class="line">#3.Home.vue请求数据</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      lunbotuList: [] <span class="comment">// 保存轮播图的数组</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getLunbotu();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">getLunbotu</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      axios.get(<span class="string">&quot;/api/getlunbo&quot;</span>).then(<span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (data.status === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="comment">// 成功了</span></span><br><span class="line">          <span class="built_in">this</span>.lunbotuList = data.message;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="built_in">this</span>.lunbotuList);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 失败的</span></span><br><span class="line">          <span class="built_in">this</span>.$toast(<span class="string">&quot;加载轮播图失败。。。&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#4.配置跨域请求</span><br><span class="line">devServer: &#123;</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    host: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">    port: <span class="number">3000</span>,</span><br><span class="line">    https: <span class="literal">false</span>,</span><br><span class="line">    hotOnly: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//配置代理服务器</span></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="comment">//凡是请求以api开头的都会使用下面的代理服务器</span></span><br><span class="line">      <span class="string">&#x27;/api/*&#x27;</span>: &#123;</span><br><span class="line">        target: <span class="string">&#x27;http://localhost:8899/&#x27;</span>, <span class="comment">// 目标服务器地址</span></span><br><span class="line">        secure: <span class="literal">false</span>,                    <span class="comment">// 目标服务器地址是否是安全协议</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>,               <span class="comment">// 是否修改来源, 为true时会让目标服务器以为是webpack-dev-server发出的请求!服务端和服务端的请求是没有跨域的</span></span><br><span class="line">        <span class="comment">//pathRewrite: &#123;&#x27;^/api&#x27;: &#x27;/&#x27;&#125;     // 将/api开头的请求地址, /api 改为 /, 即 /api/xx 改为 /xx</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">#5.Home.vue使用v-for渲染数据</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;home&quot;</span>&gt;</span><br><span class="line">    &lt;van-swipe <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;my-swipe&quot;</span> :autoplay=<span class="string">&quot;3000&quot;</span> indicator-color=<span class="string">&quot;white&quot;</span>&gt;</span><br><span class="line">      &lt;van-swipe-item v-<span class="keyword">for</span>=<span class="string">&quot;item in lunbotuList&quot;</span> :key=<span class="string">&quot;item.url&quot;</span>&gt;</span><br><span class="line">        &lt;img :src=<span class="string">&quot;item.img&quot;</span> alt /&gt;</span><br><span class="line">      &lt;/van-swipe-item&gt;</span><br><span class="line">    &lt;/van-swipe&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span>&gt;</span><br><span class="line">.my-swipe &#123;</span><br><span class="line">  height: 200px;</span><br><span class="line">  .van-swipe-item &#123;</span><br><span class="line">    color: #fff;</span><br><span class="line">    text-align: center;</span><br><span class="line">    background-color: #39a9ed;</span><br><span class="line">    img&#123;</span><br><span class="line">      height: <span class="number">100</span>%;</span><br><span class="line">      width: <span class="number">100</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>原因就是因为客户端请求服务端的数据是存在跨域问题的，而服务器和服务器之间可以相互请求数据，是没有跨域的概念（如果服务器没有设置禁止跨域的权限问题），也就是说，我们可以配置一个代理的服务器可以请求另一个服务器中的数据，然后把请求出来的数据返回到我们的代理服务器中，代理服务器再返回数据给我们的客户端，这样我们就可以实现跨域访问数据啦。</p>
<p>跨域请求更多解决方案：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/pass245939319/p/9040802.html">https://www.cnblogs.com/pass245939319/p/9040802.html</a></p>
<p>如果不理解可以看依据看下图</p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1550553697639.png" alt="1550553697639"></p>
<h4 id="b-首页九宫格"><a href="#b-首页九宫格" class="headerlink" title="b) 首页九宫格"></a>b) 首页九宫格</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#Home.vue</span><br><span class="line"></span><br><span class="line">&lt;van-grid :column-num=<span class="string">&quot;3&quot;</span>&gt;</span><br><span class="line">      &lt;van-grid-item</span><br><span class="line">        v-<span class="keyword">for</span>=<span class="string">&quot;item in itemList&quot;</span></span><br><span class="line">        :key=<span class="string">&quot;item.title&quot;</span></span><br><span class="line">        :icon=<span class="string">&quot;item.url&quot;</span></span><br><span class="line">        :text=<span class="string">&quot;item.title&quot;</span></span><br><span class="line">        :to=<span class="string">&quot;item.to&quot;</span></span><br><span class="line">      /&gt;</span><br><span class="line">&lt;/van-grid&gt;</span><br><span class="line"></span><br><span class="line">.van-grid-item &#123;</span><br><span class="line">  .van-grid-item__icon &#123;</span><br><span class="line">    font-size: 56px;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      lunbotuList: [], <span class="comment">// 保存轮播图的数组</span></span><br><span class="line">      itemList: [</span><br><span class="line">        &#123;</span><br><span class="line">          url: <span class="built_in">require</span>(<span class="string">&quot;../images/menu1.png&quot;</span>),</span><br><span class="line">          title: <span class="string">&quot;新闻资讯&quot;</span>,</span><br><span class="line">          to: <span class="string">&quot;/newsList&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: <span class="built_in">require</span>(<span class="string">&quot;../images/menu2.png&quot;</span>),</span><br><span class="line">          title: <span class="string">&quot;图片分享&quot;</span>,</span><br><span class="line">          to: <span class="string">&quot;/photoList&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: <span class="built_in">require</span>(<span class="string">&quot;../images/menu3.png&quot;</span>),</span><br><span class="line">          title: <span class="string">&quot;商品购买&quot;</span>,</span><br><span class="line">          to: <span class="string">&quot;/goodList&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: <span class="built_in">require</span>(<span class="string">&quot;../images/menu4.png&quot;</span>),</span><br><span class="line">          title: <span class="string">&quot;留言反馈&quot;</span>,</span><br><span class="line">          to: <span class="string">&quot;/&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: <span class="built_in">require</span>(<span class="string">&quot;../images/menu5.png&quot;</span>),</span><br><span class="line">          title: <span class="string">&quot;视频专区&quot;</span>,</span><br><span class="line">          to: <span class="string">&quot;/&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          url: <span class="built_in">require</span>(<span class="string">&quot;../images/menu6.png&quot;</span>),</span><br><span class="line">          title: <span class="string">&quot;联系我们&quot;</span>,</span><br><span class="line">          to: <span class="string">&quot;/&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-新闻列表页"><a href="#1-3-3-新闻列表页" class="headerlink" title="1.3.3 新闻列表页"></a>1.3.3 新闻列表页</h3><h4 id="a-来到新闻列表页"><a href="#a-来到新闻列表页" class="headerlink" title="a) 来到新闻列表页"></a>a) 来到新闻列表页</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#1.router.js配置路由</span><br><span class="line"><span class="keyword">import</span> NewsList <span class="keyword">from</span> <span class="string">&#x27;../views/news/NewsList.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      component: Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/member&quot;</span>,</span><br><span class="line">      component: Member</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/cart&quot;</span>,</span><br><span class="line">      component: Cart</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/search&quot;</span>,</span><br><span class="line">      component: Search</span><br><span class="line">    &#125;, </span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/newsList&#x27;</span>, </span><br><span class="line">      component: NewsList </span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="b-新闻列表页面"><a href="#b-新闻列表页面" class="headerlink" title="b) 新闻列表页面"></a>b) 新闻列表页面</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">#NewsList.vue   </span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;news&quot;</span>&gt;</span><br><span class="line">    &lt;van-list v-model=<span class="string">&quot;loading&quot;</span> :finished=<span class="string">&quot;finished&quot;</span> finished-text=<span class="string">&quot;没有更多了&quot;</span> @load=<span class="string">&quot;getNewsList&quot;</span>&gt;</span><br><span class="line">      &lt;van-cell</span><br><span class="line">        v-<span class="keyword">for</span>=<span class="string">&quot;item in list&quot;</span></span><br><span class="line">        :to=<span class="string">&quot;&#x27;/newsInfo/&#x27; + item.id&quot;</span></span><br><span class="line">        :key=<span class="string">&quot;item.id&quot;</span></span><br><span class="line">        :icon=<span class="string">&quot;item.img_url&quot;</span></span><br><span class="line">      &gt;</span><br><span class="line">        &lt;template slot=<span class="string">&quot;title&quot;</span>&gt;</span><br><span class="line">          &lt;h4 <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span>&gt;&#123;&#123;item.title&#125;&#125;&lt;/h4&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;template slot=<span class="string">&quot;label&quot;</span>&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;addtime&quot;</span>&gt;发表时间：&#123;&#123; item.add_time &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;clickcount&quot;</span>&gt;点击：&#123;&#123;item.click&#125;&#125;次&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">    &lt;/van-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span> scoped&gt;</span><br><span class="line">.news &#123;</span><br><span class="line">  .van-list &#123;</span><br><span class="line">    .van-cell &#123;</span><br><span class="line">      <span class="comment">/*修改图片的大小*/</span></span><br><span class="line">      .van-icon &#123;</span><br><span class="line">        font-size: 36px;</span><br><span class="line">        <span class="comment">/*通过margin微调让图片居中*/</span></span><br><span class="line">        margin-top: 5px;</span><br><span class="line">      &#125;</span><br><span class="line">      .van-cell__title &#123;</span><br><span class="line">        <span class="comment">/*这边给一个小于...的宽度之后就可以了*/</span></span><br><span class="line">        width: <span class="number">80</span>%;</span><br><span class="line">        <span class="comment">/*超出一行显示省略号*/</span></span><br><span class="line">        .title &#123;</span><br><span class="line">          white-space: nowrap;</span><br><span class="line">          overflow: hidden;</span><br><span class="line">          text-overflow: ellipsis;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      .van-cell__label &#123;</span><br><span class="line">        width: <span class="number">100</span>%;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: space-between;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">//新闻列表</span></span><br><span class="line">      list: [],</span><br><span class="line">      <span class="comment">//加载状态</span></span><br><span class="line">      loading: <span class="literal">false</span>,</span><br><span class="line">      <span class="comment">//数据是否已经加载完毕</span></span><br><span class="line">      finished: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">getNewsList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      axios.get(<span class="string">&quot;/api/getnewslist&quot;</span>).then(<span class="function">(<span class="params">&#123; data &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.loading = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (data.status === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="comment">// 成功了</span></span><br><span class="line">          <span class="built_in">this</span>.list = data.message;</span><br><span class="line">          <span class="comment">//   console.log(this.list);</span></span><br><span class="line">          <span class="built_in">this</span>.finished = <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="comment">// 失败的</span></span><br><span class="line">          <span class="built_in">this</span>.$toast(<span class="string">&quot;加载轮播图失败。。。&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="c-新闻时间格式化"><a href="#c-新闻时间格式化" class="headerlink" title="c) 新闻时间格式化"></a>c) 新闻时间格式化</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#1.main.js定义全局过滤器</span><br><span class="line">#1.1.安装时间格式化插件</span><br><span class="line">npm install moment</span><br><span class="line"></span><br><span class="line">#1.2. main.js定义全局过滤器  </span><br><span class="line"><span class="comment">// 导入格式化时间的插件</span></span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span></span><br><span class="line"><span class="comment">// 定义全局的过滤器</span></span><br><span class="line">Vue.filter(<span class="string">&#x27;dateFormat&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">dataStr, pattern = <span class="string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> moment(dataStr).format(pattern)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">#2.NewsList.vue中使用全局过滤器</span><br><span class="line"> &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;addtime&quot;</span>&gt;发表时间：&#123;&#123; item.add_time|dateFormat &#125;&#125;&lt;/span&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="d-请求的封装"><a href="#d-请求的封装" class="headerlink" title="d) 请求的封装"></a>d) 请求的封装</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">#1.tools/zgaxios.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> QS <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置超时时间</span></span><br><span class="line">axios.defaults.timeout = <span class="number">10000</span>;</span><br><span class="line"><span class="comment">// post请求头</span></span><br><span class="line">axios.defaults.headers.post[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/x-www-form-urlencoded;charset=UTF-8&#x27;</span>;</span><br><span class="line"><span class="comment">//请求携带cookie</span></span><br><span class="line">axios.defaults.withCredentials = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//对外接口</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">zgaxios</span>(<span class="params">method, url, params </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (method == <span class="string">&#x27;GET&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> get(url, params);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method == <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> post(url, params);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 封装get方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url, params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        axios.get(url, params).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(res.data);</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">            reject(err.data);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 封装post方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">post</span>(<span class="params">url, params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        axios.post(url, QS.stringify(params))</span><br><span class="line">            .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                resolve(res.data);</span><br><span class="line">            &#125;)</span><br><span class="line">            .catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">                reject(err.data)</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//请求的拦截器</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//console.log(&quot;请求执行之前&quot;,response)</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//响应的拦截器</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">    response =&gt; &#123;</span><br><span class="line">        <span class="comment">//console.log(&quot;响应处理之前&quot;,response);</span></span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line">    &#125;,</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">#2.tools/api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> LunboUrl = <span class="string">&quot;/api/getlunbo&quot;</span>   <span class="comment">//GET</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> NewslistUrl = <span class="string">&quot;/api/getnewslist&quot;</span>  <span class="comment">//GET</span></span><br><span class="line"></span><br><span class="line">#3.修改Home.vue请求代码</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; LunboUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getLunbotu</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, LunboUrl);</span><br><span class="line">      <span class="built_in">this</span>.lunbotuList = result.message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#4.修改NewsList.vue请求代码</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NewslistUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getNewsList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, NewslistUrl);</span><br><span class="line">      <span class="built_in">this</span>.list = result.message;</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span>;</span><br><span class="line">      <span class="built_in">this</span>.finished = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-4-新闻详情页"><a href="#1-3-4-新闻详情页" class="headerlink" title="1.3.4 新闻详情页"></a>1.3.4 新闻详情页</h3><h4 id="a-来到新闻详情页"><a href="#a-来到新闻详情页" class="headerlink" title="a) 来到新闻详情页"></a>a) 来到新闻详情页</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#1.router.js配置路由</span><br><span class="line"><span class="keyword">import</span> NewsInfo <span class="keyword">from</span> <span class="string">&#x27;../views/news/NewsInfo.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 创建路由对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      component: Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/member&quot;</span>,</span><br><span class="line">      component: Member</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/cart&quot;</span>,</span><br><span class="line">      component: Cart</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/search&quot;</span>,</span><br><span class="line">      component: Search</span><br><span class="line">    &#125;, </span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/newsList&#x27;</span>, </span><br><span class="line">      component: NewsList </span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/newsInfo/:id&#x27;</span>, </span><br><span class="line">      component: NewsInfo </span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="b-新闻详情页面"><a href="#b-新闻详情页面" class="headerlink" title="b) 新闻详情页面"></a>b) 新闻详情页面</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">#api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> NewsInfoUrl =<span class="string">&quot;api/getnew/&quot;</span>   <span class="comment">//GET  :id</span></span><br><span class="line"></span><br><span class="line"># NewsInfo.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-skeleton title :row=<span class="string">&quot;3&quot;</span> :loading=<span class="string">&quot;loading&quot;</span>&gt;</span><br><span class="line">      &lt;van-panel :title=<span class="string">&quot;newsinfo.title&quot;</span> :desc=<span class="string">&quot;newsinfo.add_time | dateFormat&quot;</span>&gt;</span><br><span class="line">        &lt;div v-html=<span class="string">&quot;newsinfo.content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/van-panel&gt;</span><br><span class="line">    &lt;/van-skeleton&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span> scoped&gt;</span><br><span class="line">.van-panel &#123;</span><br><span class="line">  .van-cell__title &#123;</span><br><span class="line">    color: red;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    text-align: center;</span><br><span class="line">    <span class="comment">/*副标题靠右对齐*/</span></span><br><span class="line">    .van-cell__label &#123;</span><br><span class="line">      text-align: right;</span><br><span class="line">      font-weight: normal;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .van-panel__content &#123;</span><br><span class="line">    padding: 16px;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    color: #8f8f94;</span><br><span class="line">    p &#123;</span><br><span class="line">      margin-top: 10px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NewsInfoUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      loading: <span class="literal">true</span>,</span><br><span class="line">      id: <span class="built_in">this</span>.$route.params.id, <span class="comment">// 将 URL 地址中传递过来的 Id值，挂载到 data上，方便以后调用</span></span><br><span class="line">      newsinfo: &#123;&#125; <span class="comment">// 新闻对象</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getNewsInfo();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">//获取新闻详情数据</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getNewsInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, NewsInfoUrl + <span class="built_in">this</span>.id);</span><br><span class="line">      <span class="built_in">this</span>.newsinfo = result.message[<span class="number">0</span>];</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="c-评论区域静态页面"><a href="#c-评论区域静态页面" class="headerlink" title="c) 评论区域静态页面"></a>c) 评论区域静态页面</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">#components/Comment.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-form @submit=<span class="string">&quot;onSubmit&quot;</span>&gt;</span><br><span class="line">      &lt;h3&gt;发表评论&lt;/h3&gt;</span><br><span class="line">      &lt;van-field</span><br><span class="line">        v-model=<span class="string">&quot;content&quot;</span></span><br><span class="line">        placeholder=<span class="string">&quot;请输入要BB的评论&quot;</span></span><br><span class="line">        type=<span class="string">&quot;textarea&quot;</span></span><br><span class="line">        rows=<span class="string">&quot;4&quot;</span></span><br><span class="line">        :rules=<span class="string">&quot;[&#123; required: true, message: &#x27;请填写用户名&#x27;, trigger:&#x27;onChange&#x27; &#125;]&quot;</span></span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;div style=<span class="string">&quot;margin: 16px;&quot;</span>&gt;</span><br><span class="line">        &lt;van-button block type=<span class="string">&quot;info&quot;</span> native-type=<span class="string">&quot;submit&quot;</span>&gt;发表评论&lt;/van-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/van-form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;van-list v-model=<span class="string">&quot;loading&quot;</span> :finished=<span class="string">&quot;finished&quot;</span> finished-text=<span class="string">&quot;没有更多了&quot;</span> @load=<span class="string">&quot;onLoad&quot;</span>&gt;</span><br><span class="line">      &lt;van-cell v-<span class="keyword">for</span>=<span class="string">&quot;item in list&quot;</span> :key=<span class="string">&quot;item&quot;</span>&gt;</span><br><span class="line">        &lt;template slot=<span class="string">&quot;title&quot;</span>&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;cmt-title&quot;</span>&gt;第<span class="number">1</span>楼&amp;nbsp;&amp;nbsp;张三&amp;nbsp;&amp;nbsp;时间<span class="number">2017</span>-<span class="number">10</span>-<span class="number">15</span>&lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;template slot=<span class="string">&quot;label&quot;</span>&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;cmt-body&quot;</span>&gt;此用户很懒，嘛都没说&lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">    &lt;/van-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  props: [<span class="string">&quot;id&quot;</span>],</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      content: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      list: [],</span><br><span class="line">      loading: <span class="literal">false</span>,</span><br><span class="line">      finished: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">onSubmit</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">          <span class="built_in">this</span>.list.push(<span class="built_in">this</span>.list.length + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.loading = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.list.length &gt;= <span class="number">40</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.finished = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span>&gt;</span><br><span class="line">.van-form &#123;</span><br><span class="line">  h3 &#123;</span><br><span class="line">    padding: 16px;</span><br><span class="line">  &#125;</span><br><span class="line">  .van-field__body &#123;</span><br><span class="line">    border: 1px solid #ccc;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="e-注册评论页面为子组件"><a href="#e-注册评论页面为子组件" class="headerlink" title="e) 注册评论页面为子组件"></a>e) 注册评论页面为子组件</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#NewsInfo.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line"># 1. 导入评论子组件，注册评论子组件</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NewsInfoUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Comment <span class="keyword">from</span> <span class="string">&quot;@/components/Comment.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  .............</span><br><span class="line"> components: &#123;</span><br><span class="line">    Comment</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.页面中使用评论组件</span><br><span class="line">&lt;!-- 评论子组件区域   :id是向子组件传值--&gt;</span><br><span class="line">&lt;Comment :id=<span class="string">&quot;this.id&quot;</span>&gt;&lt;/Comment&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="f-渲染评论数据、加载更多"><a href="#f-渲染评论数据、加载更多" class="headerlink" title="f) 渲染评论数据、加载更多"></a>f) 渲染评论数据、加载更多</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">#api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> LunboUrl = <span class="string">&quot;/api/getlunbo&quot;</span>   <span class="comment">//GET</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> NewslistUrl = <span class="string">&quot;/api/getnewslist&quot;</span>  <span class="comment">//GET</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> NewsInfoUrl =<span class="string">&quot;api/getnew/&quot;</span>   <span class="comment">//GET  :id</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> CommentsUrl = <span class="string">&quot;/api/getcomments/&quot;</span>   <span class="comment">//GET  :id</span></span><br><span class="line"></span><br><span class="line">#Comment.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-form @submit=<span class="string">&quot;onSubmit&quot;</span>&gt;</span><br><span class="line">      &lt;h3&gt;发表评论&lt;/h3&gt;</span><br><span class="line">      &lt;van-field</span><br><span class="line">        v-model=<span class="string">&quot;content&quot;</span></span><br><span class="line">        placeholder=<span class="string">&quot;请输入要BB的评论&quot;</span></span><br><span class="line">        type=<span class="string">&quot;textarea&quot;</span></span><br><span class="line">        rows=<span class="string">&quot;4&quot;</span></span><br><span class="line">        :rules=<span class="string">&quot;[&#123; required: true, message: &#x27;请填写用户名&#x27;, trigger:&#x27;onChange&#x27; &#125;]&quot;</span></span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;div style=<span class="string">&quot;margin: 16px;&quot;</span>&gt;</span><br><span class="line">        &lt;van-button block type=<span class="string">&quot;info&quot;</span> native-type=<span class="string">&quot;submit&quot;</span>&gt;发表评论&lt;/van-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/van-form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;van-list v-model=<span class="string">&quot;loading&quot;</span> :finished=<span class="string">&quot;finished&quot;</span> finished-text=<span class="string">&quot;没有更多了&quot;</span> @load=<span class="string">&quot;getCommentInfo&quot;</span>&gt;</span><br><span class="line">      &lt;van-cell v-<span class="keyword">for</span>=<span class="string">&quot;(item,idx) in list&quot;</span> :key=<span class="string">&quot;item.add_time&quot;</span>&gt;</span><br><span class="line">        &lt;template slot=<span class="string">&quot;title&quot;</span>&gt;</span><br><span class="line">          &lt;div</span><br><span class="line">            <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;cmt-title&quot;</span></span><br><span class="line">          &gt;第&#123;&#123;idx&#125;&#125;楼&amp;nbsp;&amp;nbsp;&#123;&#123;item.user_name&#125;&#125;&amp;nbsp;&amp;nbsp;时间&#123;&#123;item.add_time|dateFormat&#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;template slot=<span class="string">&quot;label&quot;</span>&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;cmt-body&quot;</span>&gt;&#123;&#123;item.content&#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">    &lt;/van-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; CommentsUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  props: [<span class="string">&quot;id&quot;</span>],</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      content: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      list: [], <span class="comment">//所有的评论数据</span></span><br><span class="line">      loading: <span class="literal">false</span>,</span><br><span class="line">      finished: <span class="literal">false</span>,</span><br><span class="line">      pageIndex: <span class="number">1</span> <span class="comment">// 默认展示第一页数据</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">onSubmit</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getCommentInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, CommentsUrl + <span class="built_in">this</span>.id, &#123;</span><br><span class="line">        params: &#123; <span class="attr">pageindex</span>: <span class="built_in">this</span>.pageIndex &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//console.log(result);</span></span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">if</span> (result.status == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (result.message.length == <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.finished = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果有更多数据，则将返回的数据追加到this.comments里面去</span></span><br><span class="line">        <span class="built_in">this</span>.list = [...this.list, ...result.message];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.pageIndex++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="g-发表评论"><a href="#g-发表评论" class="headerlink" title="g) 发表评论"></a>g) 发表评论</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#1.api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> PostCommentUrl = <span class="string">&quot;/api/postcomment/&quot;</span>  <span class="comment">//POST  :id</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; CommentsUrl, PostCommentUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"> .........</span><br><span class="line">  methods: &#123;</span><br><span class="line">    .............</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">onSubmit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;POST&quot;</span>, PostCommentUrl + <span class="built_in">this</span>.id, &#123;</span><br><span class="line">        content: <span class="built_in">this</span>.content.trim()</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="built_in">console</span>.log(result);</span><br><span class="line">      <span class="keyword">if</span> (result.status == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.list.unshift(&#123;</span><br><span class="line">          user_name: <span class="string">&quot;匿名用户&quot;</span>,</span><br><span class="line">          add_time: <span class="built_in">Date</span>.now(),</span><br><span class="line">          content: <span class="built_in">this</span>.content.trim()</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//清空页面textarea内容</span></span><br><span class="line">        <span class="built_in">this</span>.content = <span class="string">&quot;&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  ..............................</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-5-图片列表"><a href="#1-3-5-图片列表" class="headerlink" title="1.3.5 图片列表"></a>1.3.5 图片列表</h3><h4 id="a-来到图片列表页面"><a href="#a-来到图片列表页面" class="headerlink" title="a) 来到图片列表页面"></a>a) 来到图片列表页面</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#1.router.js</span><br><span class="line"><span class="keyword">import</span> PhotoList <span class="keyword">from</span> <span class="string">&#x27;../views/photos/PhotoList.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 创建路由对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      component: Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/member&quot;</span>,</span><br><span class="line">      component: Member</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/cart&quot;</span>,</span><br><span class="line">      component: Cart</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/search&quot;</span>,</span><br><span class="line">      component: Search</span><br><span class="line">    &#125;, </span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/newsList&#x27;</span>, </span><br><span class="line">      component: NewsList </span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/newsInfo/:id&#x27;</span>, </span><br><span class="line">      component: NewsInfo </span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/photoList&#x27;</span>, </span><br><span class="line">      component:PhotoList</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">#3.views/photo/photoList.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        图片列表页面</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="b-图片列表分类水平滚动条"><a href="#b-图片列表分类水平滚动条" class="headerlink" title="b) 图片列表分类水平滚动条"></a>b) 图片列表分类水平滚动条</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-tabs animated v-model=<span class="string">&quot;activeID&quot;</span> @click=<span class="string">&quot;tabItemClick&quot;</span>&gt;</span><br><span class="line">      &lt;van-tab :name=<span class="string">&quot;item.id&quot;</span> :key=<span class="string">&quot;item.id&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;(item,index) in cates&quot;</span> :title=<span class="string">&quot;item.title&quot;</span>&gt;内容 &#123;&#123; index &#125;&#125;&lt;/van-tab&gt;</span><br><span class="line">    &lt;/van-tabs&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      cates: [</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">&quot;美女图片&quot;</span>, <span class="attr">id</span>: <span class="number">1</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">&quot;风景画&quot;</span>, <span class="attr">id</span>: <span class="number">2</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">&quot;风景画&quot;</span>, <span class="attr">id</span>: <span class="number">3</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">&quot;旅游&quot;</span>, <span class="attr">id</span>: <span class="number">4</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">&quot;苏州&quot;</span>, <span class="attr">id</span>: <span class="number">5</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">&quot;无锡&quot;</span>, <span class="attr">id</span>: <span class="number">6</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">title</span>: <span class="string">&quot;上海&quot;</span>, <span class="attr">id</span>: <span class="number">7</span> &#125;</span><br><span class="line">      ],</span><br><span class="line">      activeID:<span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">tabItemClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.activeID);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span>&gt;</span><br><span class="line">.van-tab__pane &#123;</span><br><span class="line">  padding: 16px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="c-获取图片分类数据"><a href="#c-获取图片分类数据" class="headerlink" title="c) 获取图片分类数据"></a>c) 获取图片分类数据</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ImgCatrgoryUrl = <span class="string">&quot;/api/getimgcategory&quot;</span>  <span class="comment">//GET</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ImagesUrl =<span class="string">&quot;/api/getimages/&quot;</span>   <span class="comment">//GET  :id</span></span><br><span class="line"></span><br><span class="line">#PhotoList.vue</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ImgCatrgoryUrl, ImagesUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      cates: [</span><br><span class="line">        <span class="comment">//这边需要注释掉，否则请求分类数据会来之后第一页数据不能正常渲染</span></span><br><span class="line">        <span class="comment">// &#123; title: &quot;美女图片&quot;, id: 1 &#125;,</span></span><br><span class="line">        <span class="comment">// &#123; title: &quot;风景画&quot;, id: 2 &#125;,</span></span><br><span class="line">        <span class="comment">// &#123; title: &quot;风景画&quot;, id: 3 &#125;,</span></span><br><span class="line">        <span class="comment">// &#123; title: &quot;旅游&quot;, id: 4 &#125;,</span></span><br><span class="line">        <span class="comment">// &#123; title: &quot;苏州&quot;, id: 5 &#125;,</span></span><br><span class="line">        <span class="comment">// &#123; title: &quot;无锡&quot;, id: 6 &#125;,</span></span><br><span class="line">        <span class="comment">// &#123; title: &quot;上海&quot;, id: 7 &#125;</span></span><br><span class="line">      ],</span><br><span class="line">      activeID: -<span class="number">1</span>,</span><br><span class="line">      list: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//获取分类数据</span></span><br><span class="line">    <span class="built_in">this</span>.getPhotoCategory();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">tabItemClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.activeID);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getPhotoCategory</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, ImgCatrgoryUrl);</span><br><span class="line">      <span class="built_in">this</span>.cates = result.message;</span><br><span class="line">      <span class="comment">//追加一条全部分类数据</span></span><br><span class="line">      <span class="built_in">this</span>.cates.unshift(&#123; <span class="attr">title</span>: <span class="string">&quot;全部&quot;</span>, <span class="attr">id</span>: <span class="number">0</span> &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//默认情况下获取第一个分类下的数据</span></span><br><span class="line">      <span class="comment">//   this.getPhotoListByCateId(this.cates[0].id);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="d-获取图片列表的数据，渲染图片列表"><a href="#d-获取图片列表的数据，渲染图片列表" class="headerlink" title="d) 获取图片列表的数据，渲染图片列表"></a>d) 获取图片列表的数据，渲染图片列表</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">#1.main.js</span><br><span class="line"><span class="keyword">import</span> &#123; Lazyload &#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span>;</span><br><span class="line">Vue.use(Lazyload);</span><br><span class="line"></span><br><span class="line">#2.PhotoList.vue</span><br><span class="line">methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">tabItemClick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.activeID);</span><br><span class="line">      <span class="built_in">this</span>.getPhotoListByCateId(<span class="built_in">this</span>.activeID);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getPhotoCategory</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      ...........</span><br><span class="line">      <span class="comment">//默认情况下获取第一个分类下的数据</span></span><br><span class="line">      <span class="built_in">this</span>.getPhotoListByCateId(<span class="built_in">this</span>.cates[<span class="number">0</span>].id);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//获取图片列表数据</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getPhotoListByCateId</span>(<span class="params">cateid</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, ImagesUrl + cateid);</span><br><span class="line">      <span class="built_in">this</span>.list = result.message;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-tabs animated v-model=<span class="string">&quot;activeID&quot;</span> @click=<span class="string">&quot;tabItemClick&quot;</span>&gt;</span><br><span class="line">      &lt;van-tab :name=<span class="string">&quot;item.id&quot;</span> :key=<span class="string">&quot;item.id&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;(item,index) in cates&quot;</span> :title=<span class="string">&quot;item.title&quot;</span>&gt;</span><br><span class="line">        &lt;ul <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;photo-list&quot;</span>&gt;</span><br><span class="line">          &lt;router-link v-<span class="keyword">for</span>=<span class="string">&quot;item in list&quot;</span> :key=<span class="string">&quot;item.id&quot;</span> :to=<span class="string">&quot;&#x27;/photoInfo/&#x27; + item.id&quot;</span> tag=<span class="string">&quot;li&quot;</span>&gt;</span><br><span class="line">            &lt;img v-lazy=<span class="string">&quot;item.img_url&quot;</span> /&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;info&quot;</span>&gt;</span><br><span class="line">              &lt;h1 <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;info-title&quot;</span>&gt;&#123;&#123; item.title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">              &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;info-body&quot;</span>&gt;&#123;&#123; item.zhaiyao &#125;&#125;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/router-link&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/van-tab&gt;</span><br><span class="line">    &lt;/van-tabs&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span>&gt;</span><br><span class="line">.van-tab__pane &#123;</span><br><span class="line">  padding: 16px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.photo-list &#123;</span><br><span class="line">  list-style: none;</span><br><span class="line">  margin: <span class="number">0</span>;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  padding-bottom: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  li &#123;</span><br><span class="line">    background-color: #ccc;</span><br><span class="line">    text-align: center;</span><br><span class="line">    margin-bottom: 10px;</span><br><span class="line">    box-shadow: 0 0 9px #999;</span><br><span class="line">    position: relative;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: <span class="number">100</span>%;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    .info &#123;</span><br><span class="line">      color: white;</span><br><span class="line">      text-align: left;</span><br><span class="line">      position: absolute;</span><br><span class="line">      bottom: <span class="number">0</span>;</span><br><span class="line">      width: <span class="number">100</span>%;</span><br><span class="line">      background-color: rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>);</span><br><span class="line">      overflow: auto;</span><br><span class="line">      max-height: 100px;</span><br><span class="line"></span><br><span class="line">      .info-title &#123;</span><br><span class="line">        font-size: 14px;</span><br><span class="line">      &#125;</span><br><span class="line">      .info-body &#123;</span><br><span class="line">        font-size: 13px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-6-图片详情"><a href="#1-3-6-图片详情" class="headerlink" title="1.3.6 图片详情"></a>1.3.6 图片详情</h3><h4 id="a-来到图片详情页"><a href="#a-来到图片详情页" class="headerlink" title="a) 来到图片详情页"></a>a) 来到图片详情页</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">#1.router.js配置路由</span><br><span class="line"><span class="keyword">import</span> PhotoInfo <span class="keyword">from</span> <span class="string">&#x27;../views/photos/PhotoInfo.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 创建路由对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      component: Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/member&quot;</span>,</span><br><span class="line">      component: Member</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/cart&quot;</span>,</span><br><span class="line">      component: Cart</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/search&quot;</span>,</span><br><span class="line">      component: Search</span><br><span class="line">    &#125;, </span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/newsList&#x27;</span>, </span><br><span class="line">      component: NewsList </span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/newsInfo/:id&#x27;</span>, </span><br><span class="line">      component: NewsInfo </span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/photoList&#x27;</span>, </span><br><span class="line">      component:PhotoList</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/photoInfo/:id&#x27;</span>, </span><br><span class="line">      component:PhotoInfo</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">#3.photo/PhotoInfo.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-panel&gt;</span><br><span class="line">      &lt;template slot=<span class="string">&quot;header&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;header&quot;</span>&gt;</span><br><span class="line">          &lt;h4 <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span>&gt;现代简约&lt;/h4&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;desc&quot;</span>&gt;</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;addtime&quot;</span>&gt;发表时间&lt;/span&gt;</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;clickcount&quot;</span>&gt;点击:<span class="number">0</span>次&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template slot=<span class="string">&quot;default&quot;</span>&gt;</span><br><span class="line">        &lt;!-- 缩略图区域 --&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;thumbs&quot;</span>&gt;</span><br><span class="line">          &lt;img <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;preview-img&quot;</span> /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 图片内容区域 --&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span>&gt;内容&lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/van-panel&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="b-获取图片详情数据"><a href="#b-获取图片详情数据" class="headerlink" title="b) 获取图片详情数据"></a>b) 获取图片详情数据</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ImageInfoUrl = <span class="string">&quot;/api/getimageInfo/&quot;</span>  <span class="comment">//GET :id</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ThumImageUrl = <span class="string">&quot;/api/getthumimages/&quot;</span>  <span class="comment">//GET  :id</span></span><br><span class="line"></span><br><span class="line">#PhotoInfo.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ImageInfoUrl, ThumImageUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      id: <span class="built_in">this</span>.$route.params.id,</span><br><span class="line">      photoinfo: &#123;&#125;, <span class="comment">// 图片详情</span></span><br><span class="line">      list: [] <span class="comment">// 缩略图的数组</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getPhotoInfo();</span><br><span class="line">    <span class="built_in">this</span>.getPhotoThubs();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">//获取图片详情</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getPhotoInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, ImageInfoUrl + <span class="built_in">this</span>.id);</span><br><span class="line">      <span class="built_in">this</span>.photoinfo = result.message.length &gt; <span class="number">0</span> ? result.message[<span class="number">0</span>] : &#123;&#125;;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.photoinfo);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//获取缩略图数据</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getPhotoThubs</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, ThumImageUrl + <span class="built_in">this</span>.id);</span><br><span class="line">      <span class="keyword">if</span> (result.status == <span class="number">0</span>) &#123;</span><br><span class="line">        result.message.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">          item.src = item.src; <span class="comment">//点击大图的网址</span></span><br><span class="line">          item.w = <span class="number">400</span>;</span><br><span class="line">          item.h = <span class="number">200</span>;</span><br><span class="line">          item.msrc = item.src; <span class="comment">//点击小图的网址</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="built_in">this</span>.list = result.message;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.list);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="c-渲染图片详情数据"><a href="#c-渲染图片详情数据" class="headerlink" title="c) 渲染图片详情数据"></a>c) 渲染图片详情数据</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#1.注意：这边获取缩略图的时候需要装一个插件  https://github.com/LS1231/vue-preview</span><br><span class="line">npm i vue-preview -S</span><br><span class="line"></span><br><span class="line">#2.main.js</span><br><span class="line"><span class="keyword">import</span>  vuepreview <span class="keyword">from</span> <span class="string">&#x27;vue-preview&#x27;</span></span><br><span class="line">Vue.use(vuepreview)</span><br><span class="line"></span><br><span class="line">#3.PhotoInfo.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-panel&gt;</span><br><span class="line">      &lt;template slot=<span class="string">&quot;header&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;header&quot;</span>&gt;</span><br><span class="line">          &lt;h4 <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span>&gt;&#123;&#123; photoinfo.title &#125;&#125;&lt;/h4&gt;</span><br><span class="line">          &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;desc&quot;</span>&gt;</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;addtime&quot;</span>&gt;&#123;&#123; photoinfo.add_time | dateFormat &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;clickcount&quot;</span>&gt;点击:&#123;&#123; photoinfo.click &#125;&#125;次&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template slot=<span class="string">&quot;default&quot;</span>&gt;</span><br><span class="line">        &lt;!-- 缩略图区域 --&gt;</span><br><span class="line">        &lt;vue-preview :slides=<span class="string">&quot;list&quot;</span>&gt;&lt;/vue-preview&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 图片内容区域 --&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span> v-html=<span class="string">&quot;photoinfo.content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/van-panel&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span> scoped&gt;</span><br><span class="line">.van-panel &#123;</span><br><span class="line">  .header &#123;</span><br><span class="line">    padding: 8px;</span><br><span class="line">    .title &#123;</span><br><span class="line">      text-align: center;</span><br><span class="line">      padding-bottom: 10px;</span><br><span class="line">      color: #26a2ff;</span><br><span class="line">    &#125;</span><br><span class="line">    .desc &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: space-between;</span><br><span class="line">      font-size: 13px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .content &#123;</span><br><span class="line">    font-size: 13px;</span><br><span class="line">    line-height: 30px;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  因为缩略图是第三方插件，如果在scoped下无法修改第三方插件的样式</span></span><br><span class="line"><span class="comment">  解决方案：</span></span><br><span class="line"><span class="comment">  1.再写一个style，不使用scoped &lt;style lang=&quot;scss&quot;&gt;</span></span><br><span class="line"><span class="comment">  2.使用样式的穿透 ： </span></span><br><span class="line"><span class="comment">    less中可以使用 &gt;&gt;&gt;  /deep/</span></span><br><span class="line"><span class="comment">    scss中可以使用 ::v-deep /deep/</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  /deep/ figure &#123;</span><br><span class="line">    width: 80px;</span><br><span class="line">    margin: 5px;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    a &#123;</span><br><span class="line">      img[itemprop] &#123;</span><br><span class="line">        box-shadow: 0 0 8px #999;</span><br><span class="line">        width: 80px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-7-商品列表"><a href="#1-3-7-商品列表" class="headerlink" title="1.3.7 商品列表"></a>1.3.7 商品列表</h3><h4 id="a-来到商品列表页"><a href="#a-来到商品列表页" class="headerlink" title="a) 来到商品列表页"></a>a) 来到商品列表页</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">#1.router.js</span><br><span class="line"><span class="keyword">import</span> GoodList <span class="keyword">from</span> <span class="string">&#x27;../views/good/GoodList.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 创建路由对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      component: Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/member&quot;</span>,</span><br><span class="line">      component: Member</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/cart&quot;</span>,</span><br><span class="line">      component: Cart</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/search&quot;</span>,</span><br><span class="line">      component: Search</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/newsList&#x27;</span>,</span><br><span class="line">      component: NewsList</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/newsInfo/:id&#x27;</span>,</span><br><span class="line">      component: NewsInfo</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/photoList&#x27;</span>,</span><br><span class="line">      component: PhotoList</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/photoInfo/:id&#x27;</span>,</span><br><span class="line">      component: PhotoInfo</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/goodList&quot;</span>,</span><br><span class="line">      component: GoodList</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">#3.good/GoodList.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;goods-item&quot;</span>&gt;</span><br><span class="line">      &lt;img src=<span class="string">&quot;http://127.0.0.1:8899/upload/201504/20/thumb_201504200119256512.jpg&quot;</span> alt /&gt;</span><br><span class="line">      &lt;h1 <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span>&gt;小米（Mi）小米Note 16G双网通版&lt;/h1&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;info&quot;</span>&gt;</span><br><span class="line">        &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;price&quot;</span>&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;now&quot;</span>&gt;￥<span class="number">899</span>&lt;/span&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;old&quot;</span>&gt;￥<span class="number">999</span>&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;sell&quot;</span>&gt;</span><br><span class="line">          &lt;span&gt;热卖中&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;剩<span class="number">60</span>件&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;goods-item&quot;</span>&gt;</span><br><span class="line">      &lt;img src=<span class="string">&quot;http://127.0.0.1:8899/upload/201504/20/thumb_201504200214471783.jpg&quot;</span> alt /&gt;</span><br><span class="line">      &lt;h1 <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span>&gt;尼康(Nikon)D3300套机（<span class="number">18</span>-55mm f/<span class="number">3.5</span>-<span class="number">5.</span>6G VRII）（黑色）&lt;/h1&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;info&quot;</span>&gt;</span><br><span class="line">        &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;price&quot;</span>&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;now&quot;</span>&gt;￥<span class="number">899</span>&lt;/span&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;old&quot;</span>&gt;￥<span class="number">999</span>&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;sell&quot;</span>&gt;</span><br><span class="line">          &lt;span&gt;热卖中&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;剩<span class="number">60</span>件&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;goods-item&quot;</span>&gt;</span><br><span class="line">      &lt;img src=<span class="string">&quot;http://127.0.0.1:8899/upload/201504/20/thumb_201504200119256512.jpg&quot;</span> alt /&gt;</span><br><span class="line">      &lt;h1 <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span>&gt;小米（Mi）小米Note 16G双网通版&lt;/h1&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;info&quot;</span>&gt;</span><br><span class="line">        &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;price&quot;</span>&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;now&quot;</span>&gt;￥<span class="number">899</span>&lt;/span&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;old&quot;</span>&gt;￥<span class="number">999</span>&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;sell&quot;</span>&gt;</span><br><span class="line">          &lt;span&gt;热卖中&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;剩<span class="number">60</span>件&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span> scoped&gt;</span><br><span class="line">.goods-list &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-wrap: wrap;</span><br><span class="line">  padding: 7px;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line"></span><br><span class="line">  .goods-item &#123;</span><br><span class="line">    width: <span class="number">49</span>%;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    border: 1px solid #ccc;</span><br><span class="line">    box-shadow: <span class="number">0</span> <span class="number">0</span> 8px #ccc;</span><br><span class="line">    margin: 4px <span class="number">0</span>;</span><br><span class="line">    padding: 2px;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    min-height: 293px;</span><br><span class="line"></span><br><span class="line">    img &#123;</span><br><span class="line">      width: <span class="number">100</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">    .title &#123;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .info &#123;</span><br><span class="line">      background-color: #eee;</span><br><span class="line">      p &#123;</span><br><span class="line">        margin: <span class="number">0</span>;</span><br><span class="line">        padding: 5px;</span><br><span class="line">      &#125;</span><br><span class="line">      .price &#123;</span><br><span class="line">        .now &#123;</span><br><span class="line">          color: red;</span><br><span class="line">          font-weight: bold;</span><br><span class="line">          font-size: 16px;</span><br><span class="line">        &#125;</span><br><span class="line">        .old &#123;</span><br><span class="line">          text-decoration: line-through;</span><br><span class="line">          font-size: 12px;</span><br><span class="line">          margin-left: 10px;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      .sell &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: space-between;</span><br><span class="line">        font-size: 13px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="b-商品列表数据渲染"><a href="#b-商品列表数据渲染" class="headerlink" title="b) 商品列表数据渲染"></a>b) 商品列表数据渲染</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> GoodsUrl = <span class="string">&quot;/api/getgoods&quot;</span>   <span class="comment">//GET</span></span><br><span class="line"></span><br><span class="line">#good/GoodList.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span><br><span class="line">      &lt;router-link</span><br><span class="line">        <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;goods-item&quot;</span></span><br><span class="line">        v-<span class="keyword">for</span>=<span class="string">&quot;item in goodslist&quot;</span></span><br><span class="line">        :key=<span class="string">&quot;item.id&quot;</span></span><br><span class="line">        :to=<span class="string">&quot;&#x27;/goodInfo/&#x27;+item.id&quot;</span></span><br><span class="line">        tag=<span class="string">&quot;div&quot;</span></span><br><span class="line">      &gt;</span><br><span class="line">        &lt;img :src=<span class="string">&quot;item.img_url&quot;</span> alt /&gt;</span><br><span class="line">        &lt;h1 <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span>&gt;&#123;&#123; item.title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;info&quot;</span>&gt;</span><br><span class="line">          &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;price&quot;</span>&gt;</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;now&quot;</span>&gt;￥&#123;&#123; item.sell_price &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;old&quot;</span>&gt;￥&#123;&#123; item.market_price &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">          &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;sell&quot;</span>&gt;</span><br><span class="line">            &lt;span&gt;热卖中&lt;/span&gt;</span><br><span class="line">            &lt;span&gt;剩&#123;&#123; item.stock_quantity &#125;&#125;件&lt;/span&gt;</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">      &lt;van-button type=<span class="string">&quot;info&quot;</span> block @click=<span class="string">&quot;getMore&quot;</span>&gt;加载更多&lt;/van-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; GoodsUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      pageindex: <span class="number">1</span>, <span class="comment">// 分页的页数</span></span><br><span class="line">      goodslist: [] <span class="comment">// 存放商品列表的数组</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getGoodsList();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">//获取商品列表</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getGoodsList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, GoodsUrl, &#123;</span><br><span class="line">        params: &#123;</span><br><span class="line">          pageindex: <span class="built_in">this</span>.pageindex</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (result.status === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(result.message,<span class="string">&quot;000000000000000000&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> (result.message.length == <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="built_in">this</span>.$toast(<span class="string">&quot;没有更多数据！&quot;</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.goodslist = [...this.goodslist, ...result.message];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">getMore</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.pageindex++;</span><br><span class="line">      <span class="built_in">this</span>.getGoodsList();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="c-来到商品详情页"><a href="#c-来到商品详情页" class="headerlink" title="c) 来到商品详情页"></a>c) 来到商品详情页</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">#1.good/GoodInfo.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;商品详情&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.router.js</span><br><span class="line"><span class="keyword">import</span> GoodInfo <span class="keyword">from</span> <span class="string">&#x27;../views/good/GoodInfo.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 创建路由对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      component: Home</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/member&quot;</span>,</span><br><span class="line">      component: Member</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/cart&quot;</span>,</span><br><span class="line">      component: Cart</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/search&quot;</span>,</span><br><span class="line">      component: Search</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/newsList&#x27;</span>,</span><br><span class="line">      component: NewsList</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/newsInfo/:id&#x27;</span>,</span><br><span class="line">      component: NewsInfo</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/photoList&#x27;</span>,</span><br><span class="line">      component: PhotoList</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/photoInfo/:id&#x27;</span>,</span><br><span class="line">      component: PhotoInfo</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/goodList&quot;</span>,</span><br><span class="line">      component: GoodList</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/goodInfo/:id&#x27;</span>,</span><br><span class="line">      component: GoodInfo</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-8-商品详情静态页面"><a href="#1-3-8-商品详情静态页面" class="headerlink" title="1.3.8 商品详情静态页面"></a>1.3.8 商品详情静态页面</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.图片轮播--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-panel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-swipe</span> <span class="attr">:autoplay</span>=<span class="string">&quot;3000&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-swipe-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(image, index) in goodImages&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-lazy</span>=<span class="string">&quot;image&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">van-swipe-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">van-swipe</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-panel</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--2.商品购买--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-panel</span> <span class="attr">title</span>=<span class="string">&quot;华为（HUAWEI）荣耀6Plus 16G双4G版&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span></span><br><span class="line">          市场价：</span><br><span class="line">          <span class="tag">&lt;<span class="name">del</span>&gt;</span>￥2499<span class="tag">&lt;/<span class="name">del</span>&gt;</span></span><br><span class="line">          销售价：</span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;now_price&quot;</span>&gt;</span>￥2195<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;buynum&quot;</span>&gt;</span></span><br><span class="line">          购买数量：</span><br><span class="line">          <span class="tag">&lt;<span class="name">van-stepper</span> <span class="attr">v-model</span>=<span class="string">&quot;buynum&quot;</span> <span class="attr">min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">max</span>=<span class="string">&quot;8&quot;</span> <span class="attr">disabled-input</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-goods-action</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-goods-action-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span> <span class="attr">text</span>=<span class="string">&quot;加入购物车&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addToCart&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-goods-action-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">text</span>=<span class="string">&quot;立即购买&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;goBuy&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">van-goods-action</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-panel</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--3.商品介绍--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-panel</span> <span class="attr">title</span>=<span class="string">&quot;商品参数&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;default&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;desc&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>商品货号：SD9102356032<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>库存情况：60件<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>上架时间：2015-04-20 00:51:03<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">block</span>&gt;</span>图文介绍<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-panel</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      buynum: 1,</span><br><span class="line">      goodImages: [</span><br><span class="line"><span class="javascript">        <span class="string">&quot;https://img.yzcdn.cn/vant/apple-1.jpg&quot;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="string">&quot;https://img.yzcdn.cn/vant/apple-2.jpg&quot;</span></span></span><br><span class="line">      ]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">addToCart</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&quot;添加购物车&quot;</span>);</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">goBuy</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&quot;立即购买&quot;</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-class">.van-panel</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="comment">/*设定panle的边框线*/</span></span></span><br><span class="line">  margin: 5px;</span><br><span class="line"><span class="css">  <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#eee</span>;</span></span><br><span class="line">  border-radius: 5px;</span><br><span class="line"></span><br><span class="line"><span class="css">  <span class="comment">/*设定轮播图样式*/</span></span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-swipe</span> &#123;</span></span><br><span class="line">    height: 200px;</span><br><span class="line">    img &#123;</span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 100%;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">  <span class="comment">/*设定面板头样式*/</span></span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-panel__header</span> &#123;</span></span><br><span class="line">    padding: 16px;</span><br><span class="line"><span class="css">    <span class="selector-class">.van-cell__title</span> &#123;</span></span><br><span class="line">      font-size: 16px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">  <span class="comment">/*设定面板体样式*/</span></span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-panel__content</span> &#123;</span></span><br><span class="line">    padding: 16px;</span><br><span class="line">    font-size: 14px;</span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#8f8f94</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="comment">/*价格和选择数量的步进器*/</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.price</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.now_price</span> &#123;</span></span><br><span class="line">        color: red;</span><br><span class="line">        font-weight: bold;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="selector-class">.buynum</span> &#123;</span></span><br><span class="line">      margin-top: 10px;</span><br><span class="line">      margin-bottom: 10px;</span><br><span class="line"><span class="css">      <span class="selector-class">.van-stepper</span> &#123;</span></span><br><span class="line">        display: inline-block;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/*让立即购买不处于页面底部*/</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-goods-action</span> &#123;</span></span><br><span class="line">      position: static;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">    <span class="comment">/*商品描述*/</span></span></span><br><span class="line"><span class="css">    <span class="selector-class">.desc</span> &#123;</span></span><br><span class="line">      p &#123;</span><br><span class="line">        margin-bottom: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="a-获取轮播数据渲染页面"><a href="#a-获取轮播数据渲染页面" class="headerlink" title="a) 获取轮播数据渲染页面"></a>a) 获取轮播数据渲染页面</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> GoodInfoUrl =<span class="string">&quot;/api/goods/getinfo/&quot;</span>   <span class="comment">//GET  :id</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#GoodInfo.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ThumImageUrl,GoodInfoUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      buynum: <span class="number">1</span>,</span><br><span class="line">      goodImages: [</span><br><span class="line">        <span class="string">&quot;https://img.yzcdn.cn/vant/apple-1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://img.yzcdn.cn/vant/apple-2.jpg&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      id: <span class="built_in">this</span>.$route.params.id,</span><br><span class="line">      goodsinfo: &#123;&#125;, </span><br><span class="line">      </span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">   <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getLunbo();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    ..............</span><br><span class="line">    <span class="comment">//获取轮播图数据</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getLunbo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, ThumImageUrl + <span class="built_in">this</span>.id);</span><br><span class="line">      <span class="built_in">this</span>.goodImages = result.message;</span><br><span class="line">      <span class="comment">//console.log(this.goodImages)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="b-获取商品参数渲染页面"><a href="#b-获取商品参数渲染页面" class="headerlink" title="b) 获取商品参数渲染页面"></a>b) 获取商品参数渲染页面</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--<span class="number">2.</span>商品购买--&gt;</span><br><span class="line">    &lt;van-panel :title=<span class="string">&quot;goodsinfo.title&quot;</span>&gt;</span><br><span class="line">      &lt;div slot=<span class="string">&quot;default&quot;</span>&gt;</span><br><span class="line">        &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;price&quot;</span>&gt;</span><br><span class="line">          市场价：</span><br><span class="line">          &lt;del&gt;￥&#123;&#123; goodsinfo.market_price &#125;&#125;&lt;/del&gt;</span><br><span class="line">          销售价：</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;now_price&quot;</span>&gt;￥&#123;&#123; goodsinfo.sell_price &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;buynum&quot;</span>&gt;</span><br><span class="line">          购买数量：</span><br><span class="line">          &lt;van-stepper v-model=<span class="string">&quot;buynum&quot;</span> min=<span class="string">&quot;1&quot;</span> :max=<span class="string">&quot;goodsinfo.stock_quantity&quot;</span> disabled-input /&gt;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line"></span><br><span class="line">        &lt;van-goods-action&gt;</span><br><span class="line">          &lt;van-goods-action-button type=<span class="string">&quot;warning&quot;</span> text=<span class="string">&quot;加入购物车&quot;</span> @click=<span class="string">&quot;addToCart&quot;</span> /&gt;</span><br><span class="line">          &lt;van-goods-action-button type=<span class="string">&quot;danger&quot;</span> text=<span class="string">&quot;立即购买&quot;</span> @click=<span class="string">&quot;goBuy&quot;</span> /&gt;</span><br><span class="line">        &lt;/van-goods-action&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/van-panel&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--<span class="number">3.</span>商品介绍--&gt;</span><br><span class="line">    &lt;van-panel title=<span class="string">&quot;商品参数&quot;</span>&gt;</span><br><span class="line">      &lt;div slot=<span class="string">&quot;default&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;desc&quot;</span>&gt;</span><br><span class="line">          &lt;p&gt;商品货号：&#123;&#123; goodsinfo.goods_no &#125;&#125;&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;库存情况：&#123;&#123; goodsinfo.stock_quantity &#125;&#125;件&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;上架时间：&#123;&#123; goodsinfo.add_time | dateFormat &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;van-button type=<span class="string">&quot;primary&quot;</span> block&gt;图文介绍&lt;/van-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"> &lt;/van-panel&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ThumImageUrl, GoodInfoUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      buynum: <span class="number">1</span>,</span><br><span class="line">      goodImages: [</span><br><span class="line">        <span class="string">&quot;https://img.yzcdn.cn/vant/apple-1.jpg&quot;</span>,</span><br><span class="line">        <span class="string">&quot;https://img.yzcdn.cn/vant/apple-2.jpg&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      id: <span class="built_in">this</span>.$route.params.id,</span><br><span class="line">      goodsinfo: &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    ..........</span><br><span class="line">    <span class="built_in">this</span>.getGoodsInfo();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    .........</span><br><span class="line">    <span class="comment">//获取商品信息</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getGoodsInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, GoodInfoUrl + <span class="built_in">this</span>.id);</span><br><span class="line">      <span class="built_in">this</span>.goodsinfo = result.message.length &gt; <span class="number">0</span> ? result.message[<span class="number">0</span>] : &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="c-点击图文介绍商品详情"><a href="#c-点击图文介绍商品详情" class="headerlink" title="c) 点击图文介绍商品详情"></a>c) 点击图文介绍商品详情</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">#1.GoodInfo.vue</span><br><span class="line">&lt;van-button type=<span class="string">&quot;primary&quot;</span> block @click=<span class="string">&quot;goDesc(id)&quot;</span>&gt;图文介绍&lt;/van-button&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">goDesc</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//https://router.vuejs.org/zh/guide/essentials/navigation.html</span></span><br><span class="line">    <span class="comment">// 点击使用编程式导航跳转到 图文介绍页面 (这地方如果要以params方式传参，则不能用path需要用name)</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">name</span>: <span class="string">&quot;goodDesc&quot;</span>, <span class="attr">params</span>: &#123; id &#125; &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">#2.router.js</span><br><span class="line"><span class="keyword">import</span> GoodDesc <span class="keyword">from</span> <span class="string">&#x27;../views/good/GoodDesc.vue&#x27;</span></span><br><span class="line"><span class="comment">// 3. 创建路由对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    ....................</span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/goodDesc/:id&#x27;</span>, </span><br><span class="line">      component:GoodDesc, </span><br><span class="line">      name:<span class="string">&#x27;goodDesc&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> GoodDescUrl = <span class="string">&quot;/api/goods/getdesc/&quot;</span>     <span class="comment">//:id</span></span><br><span class="line"></span><br><span class="line">#4.GoodDesc.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;van-panel :title=<span class="string">&quot;info.title&quot;</span>&gt;</span><br><span class="line">    &lt;div slot=<span class="string">&quot;default&quot;</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;content&quot;</span> v-html=<span class="string">&quot;info.content&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/van-panel&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; GoodDescUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 图文数据</span></span><br><span class="line">      info: &#123;&#125;,</span><br><span class="line">      id: <span class="built_in">this</span>.$route.params.id</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.getDesc();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getDesc</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, GoodDescUrl + <span class="built_in">this</span>.id);</span><br><span class="line">      <span class="built_in">this</span>.info = result.message.length &gt; <span class="number">0</span> ? result.message[<span class="number">0</span>] : &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span> scoped&gt;</span><br><span class="line">.van-panel &#123;</span><br><span class="line">  .van-panel__header &#123;</span><br><span class="line">    .van-cell__title &#123;</span><br><span class="line">      font-size: 15px;</span><br><span class="line">      color: #226aff;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  .van-panel__content &#123;</span><br><span class="line">    padding-left: 16px;</span><br><span class="line">    padding-right: 16px;</span><br><span class="line">    .content &#123;</span><br><span class="line">      <span class="comment">/*因为.content下面的元素不是当前组件拥有的，所以需要使用穿透来设置样式*/</span></span><br><span class="line">      /deep/ p &#123;</span><br><span class="line">        margin-bottom: 10px;</span><br><span class="line">        font-size: 13px;</span><br><span class="line">        color: #515a6e;</span><br><span class="line">        img &#123;</span><br><span class="line">          width: <span class="number">100</span>%;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="d-添加购物车动画"><a href="#d-添加购物车动画" class="headerlink" title="d) 添加购物车动画"></a>d) 添加购物车动画</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"># GoodInfo.vue</span><br><span class="line"></span><br><span class="line">&lt;!--<span class="number">1.</span>页面添加小球--&gt;</span><br><span class="line">    &lt;van-panel :title=<span class="string">&quot;goodsinfo.title&quot;</span>&gt;</span><br><span class="line">      &lt;div slot=<span class="string">&quot;default&quot;</span>&gt;</span><br><span class="line">        &lt;p <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;price&quot;</span>&gt;</span><br><span class="line">          &lt;transition @before-enter=<span class="string">&quot;beforeEnter&quot;</span> @enter=<span class="string">&quot;enter&quot;</span> @after-enter=<span class="string">&quot;afterEnter&quot;</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;ball&quot;</span> v-show=<span class="string">&quot;ballFlag&quot;</span> ref=<span class="string">&quot;ball&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">          &lt;/transition&gt;市场价：</span><br><span class="line">          .............</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">         .........</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/van-panel&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--<span class="number">2.</span>设定小球样式--&gt;</span><br><span class="line">  .price &#123;</span><br><span class="line">      position: relative;</span><br><span class="line">      .ball&#123;</span><br><span class="line">        width: 20px;</span><br><span class="line">        height: 20px;</span><br><span class="line">        background-color: red;</span><br><span class="line">        z-index: <span class="number">100</span>;</span><br><span class="line">        border-radius: <span class="number">50</span>%;</span><br><span class="line">        position: absolute;</span><br><span class="line">        left: 110px;</span><br><span class="line">        top: 32px;</span><br><span class="line">      &#125;</span><br><span class="line">      .now_price &#123;</span><br><span class="line">        color: red;</span><br><span class="line">        font-weight: bold;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;!--<span class="number">3.</span>实现小球添加购物车功能--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ThumImageUrl, GoodInfoUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      .........</span><br><span class="line">      <span class="comment">//控制购物车小球隐藏显示</span></span><br><span class="line">      ballFlag: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  ..........</span><br><span class="line">  methods: &#123;</span><br><span class="line">    ........</span><br><span class="line">    <span class="function"><span class="title">addToCart</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="comment">// console.log(&quot;添加购物车&quot;);</span></span><br><span class="line">      <span class="comment">// 添加到购物车</span></span><br><span class="line">      <span class="built_in">this</span>.ballFlag = !<span class="built_in">this</span>.ballFlag;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">goBuy</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;立即购买&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    ...........</span><br><span class="line">    <span class="function"><span class="title">beforeEnter</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">      el.style.transform = <span class="string">&quot;translate(0, 0)&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">enter</span>(<span class="params">el, done</span>)</span> &#123;</span><br><span class="line">      el.offsetWidth;</span><br><span class="line">      <span class="comment">// 获取小球的在页面中的位置</span></span><br><span class="line">      <span class="keyword">const</span> ballPosition = <span class="built_in">this</span>.$refs.ball.getBoundingClientRect();</span><br><span class="line">      <span class="comment">// 获取徽标在页面中的位置</span></span><br><span class="line">      <span class="keyword">const</span> badgePosition = <span class="built_in">document</span></span><br><span class="line">        .querySelector(<span class="string">&quot;#badge&quot;</span>)</span><br><span class="line">        .getBoundingClientRect();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">const</span> xDist = badgePosition.left - ballPosition.left;</span><br><span class="line">      <span class="keyword">const</span> yDist = badgePosition.top - ballPosition.top;</span><br><span class="line"></span><br><span class="line">      el.style.transform = <span class="string">`translate(<span class="subst">$&#123;xDist&#125;</span>px, <span class="subst">$&#123;yDist&#125;</span>px)`</span>;</span><br><span class="line">      el.style.transition = <span class="string">&quot;all 1s ease&quot;</span>;</span><br><span class="line">      el.addEventListener(<span class="string">&quot;transitionend&quot;</span>, done);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">afterEnter</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">      el.style.transition = <span class="literal">null</span>;</span><br><span class="line">      <span class="built_in">this</span>.ballFlag = !<span class="built_in">this</span>.ballFlag;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="e-商品页面-购物车添加-使用vuex同步数据"><a href="#e-商品页面-购物车添加-使用vuex同步数据" class="headerlink" title="e) 商品页面-购物车添加(使用vuex同步数据)"></a>e) 商品页面-购物车添加(使用vuex同步数据)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">#1.vuex 状态持久化插件 —— vuex-persistedstate</span><br><span class="line">npm install --save vuex-persistedstate</span><br><span class="line"></span><br><span class="line">#2.store/index.js</span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> createPersistedState <span class="keyword">from</span> <span class="string">&#x27;vuex-persistedstate&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    car: []</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">//添加购物车的方法</span></span><br><span class="line">    <span class="function"><span class="title">addToCar</span>(<span class="params">state,goodinfo</span>)</span>&#123;</span><br><span class="line">     </span><br><span class="line">      <span class="keyword">var</span> flag = <span class="literal">false</span>;</span><br><span class="line">      <span class="comment">//1.看要添加的商品在购物车中是否存在</span></span><br><span class="line">      state.car.forEach(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123; </span><br><span class="line">        <span class="comment">//2.如果存在，则修改购物车中商品的购买数量就可以了</span></span><br><span class="line">        <span class="keyword">if</span>(item.id == goodinfo.id)&#123;</span><br><span class="line">          item.count += <span class="built_in">parseInt</span>(goodinfo.count)</span><br><span class="line">          flag = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">//3.如果不存在，则直接将商品添加到购物车</span></span><br><span class="line">      <span class="keyword">if</span>(flag == <span class="literal">false</span>)&#123;</span><br><span class="line">        state.car.push(goodinfo);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    <span class="comment">//返回购物车中所有商品的个数</span></span><br><span class="line">    <span class="function"><span class="title">getAllGoodCount</span>(<span class="params">state</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">      state.car.forEach(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123;</span><br><span class="line">        count += item.count;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> count;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  modules: &#123;&#125;,</span><br><span class="line">  plugins: [createPersistedState()]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">#3.main.js</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: <span class="string">&quot;123&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  render: <span class="function"><span class="params">e</span> =&gt;</span> e(app),</span><br><span class="line">  router: router,</span><br><span class="line">  store</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">#4.GoodInfo.vue</span><br><span class="line"><span class="function"><span class="title">addToCart</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="comment">//添加节流阀控制：如果添加动画没有完成，则再次点击该按钮无效</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.animFinished) &#123;</span><br><span class="line">        <span class="built_in">this</span>.animFinished = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// console.log(&quot;添加购物车&quot;);</span></span><br><span class="line">        <span class="comment">// 添加到购物车</span></span><br><span class="line">        <span class="built_in">this</span>.ballFlag = !<span class="built_in">this</span>.ballFlag;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 拼接出一个要保存到store中car数组里的商品信息对象</span></span><br><span class="line">        <span class="keyword">var</span> goodsinfo = &#123;</span><br><span class="line">          id: <span class="built_in">this</span>.id,</span><br><span class="line">          count: <span class="built_in">this</span>.buynum,</span><br><span class="line">          price: <span class="built_in">this</span>.goodsinfo.sell_price,</span><br><span class="line">          selected: <span class="literal">true</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 调用store中的mutations来将商品加入购物车</span></span><br><span class="line">        <span class="built_in">this</span>.$store.commit(<span class="string">&quot;addToCar&quot;</span>, goodsinfo);</span><br><span class="line">      &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="function"><span class="title">afterEnter</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">      el.style.transition = <span class="literal">null</span>;</span><br><span class="line">      <span class="built_in">this</span>.ballFlag = !<span class="built_in">this</span>.ballFlag;</span><br><span class="line">      <span class="built_in">this</span>.animFinished = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">#5.App.vue修改徽标值</span><br><span class="line">&lt;mt-tab-item id=<span class="string">&quot;cart&quot;</span>&gt;</span><br><span class="line">        &lt;router-link tag=<span class="string">&quot;p&quot;</span> to=<span class="string">&quot;/cart&quot;</span>&gt;</span><br><span class="line">          &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;fa fa-shopping-cart fa-2x&quot;</span>&gt;</span><br><span class="line">            &lt;mt-badge <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;badge&quot;</span> size=<span class="string">&quot;small&quot;</span> type=<span class="string">&quot;error&quot;</span>&gt;&#123;&#123; $store.getters.getAllGoodCount &#125;&#125;&lt;/mt-badge&gt;</span><br><span class="line">          &lt;/i&gt;</span><br><span class="line">          &lt;br /&gt;购物车</span><br><span class="line">        &lt;/router-link&gt;</span><br><span class="line">&lt;/mt-tab-item&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-9-购物车页面"><a href="#1-3-9-购物车页面" class="headerlink" title="1.3.9 购物车页面"></a>1.3.9 购物车页面</h3><h4 id="a-购物车页面-静态页面"><a href="#a-购物车页面-静态页面" class="headerlink" title="a) 购物车页面-静态页面"></a>a) 购物车页面-静态页面</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">#1. Car.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-cell-group&gt;</span><br><span class="line">      &lt;van-cell&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;icon&quot;</span> slot=<span class="string">&quot;icon&quot;</span>&gt;</span><br><span class="line">          &lt;van-checkbox v-model=<span class="string">&quot;checked&quot;</span>&gt;&lt;/van-checkbox&gt;</span><br><span class="line">          &lt;van-image</span><br><span class="line">            width=<span class="string">&quot;5rem&quot;</span></span><br><span class="line">            height=<span class="string">&quot;3rem&quot;</span></span><br><span class="line">            fit=<span class="string">&quot;contain&quot;</span></span><br><span class="line">            src=<span class="string">&quot;https://img.yzcdn.cn/vant/cat.jpeg&quot;</span></span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span> slot=<span class="string">&quot;title&quot;</span>&gt;华为（HUAWEI）荣耀6Plus 16G双4G版&lt;/div&gt;</span><br><span class="line">        &lt;div slot=<span class="string">&quot;label&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;label&quot;</span>&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;price&quot;</span>&gt;￥<span class="number">4390</span>&lt;/span&gt;</span><br><span class="line">          &lt;van-stepper v-model=<span class="string">&quot;buynum&quot;</span> min=<span class="string">&quot;1&quot;</span> button-size=<span class="string">&quot;24px&quot;</span> disable-input /&gt;</span><br><span class="line">          &lt;van-button type=<span class="string">&quot;info&quot;</span> size=<span class="string">&quot;small&quot;</span>&gt;删除&lt;/van-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">      &lt;van-cell&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;icon&quot;</span> slot=<span class="string">&quot;icon&quot;</span>&gt;</span><br><span class="line">          &lt;van-checkbox v-model=<span class="string">&quot;checked&quot;</span>&gt;&lt;/van-checkbox&gt;</span><br><span class="line">          &lt;van-image</span><br><span class="line">            width=<span class="string">&quot;5rem&quot;</span></span><br><span class="line">            height=<span class="string">&quot;3rem&quot;</span></span><br><span class="line">            fit=<span class="string">&quot;contain&quot;</span></span><br><span class="line">            src=<span class="string">&quot;https://img.yzcdn.cn/vant/cat.jpeg&quot;</span></span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span> slot=<span class="string">&quot;title&quot;</span>&gt;华为（HUAWEI）荣耀6Plus 16G双4G版&lt;/div&gt;</span><br><span class="line">        &lt;div slot=<span class="string">&quot;label&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;label&quot;</span>&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;price&quot;</span>&gt;￥<span class="number">4390</span>&lt;/span&gt;</span><br><span class="line">          &lt;van-stepper v-model=<span class="string">&quot;buynum&quot;</span> min=<span class="string">&quot;1&quot;</span> button-size=<span class="string">&quot;24px&quot;</span> disable-input /&gt;</span><br><span class="line">          &lt;van-button type=<span class="string">&quot;info&quot;</span> size=<span class="string">&quot;small&quot;</span>&gt;删除&lt;/van-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">    &lt;/van-cell-group&gt;</span><br><span class="line">    &lt;van-panel&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;jiesuan&quot;</span> slot=<span class="string">&quot;header&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;left&quot;</span>&gt;</span><br><span class="line">          &lt;p&gt;总计<span class="number">1000</span>&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            已勾选</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;red&quot;</span>&gt;<span class="number">10</span>&lt;/span&gt; 件，总价</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;red&quot;</span>&gt;￥<span class="number">10000</span>&lt;/span&gt;</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;van-button type=<span class="string">&quot;danger&quot;</span>&gt;去结算&lt;/van-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/van-panel&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      checked: <span class="literal">true</span>,</span><br><span class="line">      buynum: <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span> scoped&gt;</span><br><span class="line">.van-cell &#123;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  .icon &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: row;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">  &#125;</span><br><span class="line">  .title &#123;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">  &#125;</span><br><span class="line">  .label &#123;</span><br><span class="line">    .van-stepper &#123;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      vertical-align: middle;</span><br><span class="line">      margin-right: 3px;</span><br><span class="line">    &#125;</span><br><span class="line">    .price &#123;</span><br><span class="line">      font-size: 14px;</span><br><span class="line">      color: red;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">      margin-right: 3px;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">.van-panel &#123;</span><br><span class="line">  padding: 16px;</span><br><span class="line">  color: #515a6e;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">  .jiesuan&#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    .red&#123;</span><br><span class="line">      color:red;</span><br><span class="line">      font-weight: bold;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="b-购物车数据初步渲染"><a href="#b-购物车数据初步渲染" class="headerlink" title="b) 购物车数据初步渲染"></a>b) 购物车数据初步渲染</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#api.js</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> ShopcarListUrl =<span class="string">&quot;/api/goods/getshopcarlist/&quot;</span>  <span class="comment">//GET   1,2,3</span></span><br><span class="line"></span><br><span class="line">#Cart.vue</span><br><span class="line">#思路：localstorage中存储的只是商品的初步数据，并不包含商品的具体信息，所以这边购物车的实现思路是根据本地购物车中所存储的商品id的信息从服务器请求具体的商品信息，然后显示在页面</span><br><span class="line">&lt;van-cell-group&gt;</span><br><span class="line">      &lt;van-cell v-<span class="keyword">for</span>=<span class="string">&quot;(item,i) in goodslist&quot;</span> :key=<span class="string">&quot;item.id&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;icon&quot;</span> slot=<span class="string">&quot;icon&quot;</span>&gt;</span><br><span class="line">          &lt;van-checkbox v-model=<span class="string">&quot;checked&quot;</span>&gt;&lt;/van-checkbox&gt;</span><br><span class="line">          &lt;van-image</span><br><span class="line">            width=<span class="string">&quot;5rem&quot;</span></span><br><span class="line">            height=<span class="string">&quot;3rem&quot;</span></span><br><span class="line">            fit=<span class="string">&quot;contain&quot;</span></span><br><span class="line">            :src=<span class="string">&quot;item.thumb_path&quot;</span></span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;title&quot;</span> slot=<span class="string">&quot;title&quot;</span>&gt;&#123;&#123; item.title &#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div slot=<span class="string">&quot;label&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;label&quot;</span>&gt;</span><br><span class="line">          &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;price&quot;</span>&gt;￥&#123;&#123; item.sell_price &#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;van-stepper v-model=<span class="string">&quot;buynum&quot;</span> min=<span class="string">&quot;1&quot;</span> button-size=<span class="string">&quot;24px&quot;</span> disable-input /&gt;</span><br><span class="line">          &lt;van-button type=<span class="string">&quot;info&quot;</span> size=<span class="string">&quot;small&quot;</span>&gt;删除&lt;/van-button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line"> &lt;/van-cell-group&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ShopcarListUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      checked: <span class="literal">true</span>,</span><br><span class="line">      buynum: <span class="number">1</span>,</span><br><span class="line">      goodslist: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//请求购物车数据</span></span><br><span class="line">    <span class="built_in">this</span>.getGoodsList();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getGoodsList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> idArr = [];</span><br><span class="line">      <span class="built_in">this</span>.$store.state.car.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        idArr.push(item.id);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//如果购物车中没有数据，则无需请求服务器</span></span><br><span class="line">      <span class="keyword">if</span> (idArr.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">let</span> result = <span class="keyword">await</span> zgaxios(<span class="string">&quot;GET&quot;</span>, ShopcarListUrl + idArr.join(<span class="string">&quot;,&quot;</span>));</span><br><span class="line">      <span class="built_in">this</span>.goodslist = result.message;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>.goodslist);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="c-购物车商品的数量显示"><a href="#c-购物车商品的数量显示" class="headerlink" title="c) 购物车商品的数量显示"></a>c) 购物车商品的数量显示</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">实现思路：</span><br><span class="line"><span class="number">1.</span>因为购物车的数据是来自服务器的，而非本地购物车，所以在页面显示的时候并不能真实显示购物车商品数量的信息，商品数量是保存在localstorage中的</span><br><span class="line"><span class="number">2.</span>所以要实现购物车商品的显示需要在vuex中想办法，然后在页面显示vuex中的购物车数据</span><br><span class="line"></span><br><span class="line">#1.store/index.js</span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> createPersistedState <span class="keyword">from</span> <span class="string">&#x27;vuex-persistedstate&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    car: []</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    ..................</span><br><span class="line">    <span class="comment">//更新vuex中的商品信息的方法</span></span><br><span class="line">    <span class="function"><span class="title">updateCar</span>(<span class="params">state, info</span>)</span> &#123;</span><br><span class="line">      state.car.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.id == info.id) &#123;</span><br><span class="line">          item.count = info.count;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    .................</span><br><span class="line">    <span class="comment">//返回商品id所对应的购买数量的信息</span></span><br><span class="line">    <span class="function"><span class="title">getGoodsCount</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">      state.car.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        obj[item.id] = item.count;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> obj;</span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        obj[&#x27;87&#x27;] = 6,</span></span><br><span class="line"><span class="comment">        obj[&#x27;88&#x27;] = 1;</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  modules: &#123;&#125;,</span><br><span class="line">  plugins: [createPersistedState()]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.Cart.vue</span><br><span class="line">&lt;van-stepper v-model=<span class="string">&quot;$store.getters.getGoodsCount[item.id]&quot;</span> min=<span class="string">&quot;1&quot;</span> button-size=<span class="string">&quot;24px&quot;</span> disable-input @change=<span class="string">&quot;buynumChanged($event,item.id)&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> zgaxios <span class="keyword">from</span> <span class="string">&quot;@/tools/zgaxios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ShopcarListUrl &#125; <span class="keyword">from</span> <span class="string">&quot;@/tools/api&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  ..................</span><br><span class="line">  methods: &#123;</span><br><span class="line">    ......................</span><br><span class="line">    <span class="comment">//更新vuex</span></span><br><span class="line">    <span class="function"><span class="title">buynumChanged</span>(<span class="params">buynum,id</span>)</span>&#123;</span><br><span class="line">       <span class="built_in">this</span>.$store.commit(<span class="string">&quot;updateCar&quot;</span>, &#123;</span><br><span class="line">        id,</span><br><span class="line">        count:buynum</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="d-购物车删除"><a href="#d-购物车删除" class="headerlink" title="d) 购物车删除"></a>d) 购物车删除</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#1.ShopcarContainer.vue</span><br><span class="line">&lt;a href=<span class="string">&quot;#&quot;</span> @click.prevent=<span class="string">&quot;remove(item.id, i)&quot;</span>&gt;删除&lt;/a&gt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">remove</span>(<span class="params">id, index</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 点击删除，把商品从 store 中根据 传递的 Id 删除，同时，把 当前组件中的 goodslist 中，对应要删除的那个商品，使用 index 来删除</span></span><br><span class="line">    <span class="built_in">this</span>.goodslist.splice(index, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">this</span>.$store.commit(<span class="string">&quot;removeFormCar&quot;</span>, id);</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line">#2.store/index.js中新增删除方法</span><br><span class="line"><span class="function"><span class="title">removeFormCar</span>(<span class="params">state, id</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 根据Id，从store 中的购物车中删除对应的那条商品数据</span></span><br><span class="line">    state.car.some(<span class="function">(<span class="params">item, i</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.id == id) &#123;</span><br><span class="line">            state.car.splice(i, <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="e-勾选复选框同步页面"><a href="#e-勾选复选框同步页面" class="headerlink" title="e) 勾选复选框同步页面"></a>e) 勾选复选框同步页面</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">#实现思路：</span><br><span class="line"><span class="number">1.</span>初始化复选框的状态信息</span><br><span class="line"><span class="number">2.</span>复选框状态被改变后更新localstorage</span><br><span class="line"><span class="number">3.</span>在页面显示结算模块的信息</span><br><span class="line"></span><br><span class="line">#1.Cart.vue</span><br><span class="line">#1.1 这个地方不能直接绑定vuex的getters，这边的v-model需要绑定一个当前组件的state</span><br><span class="line">&lt;van-checkbox</span><br><span class="line">v-model=<span class="string">&quot;itemSelected[item.id]&quot;</span></span><br><span class="line">@change=<span class="string">&quot;itemSelectedChanged($event,item.id)&quot;</span></span><br><span class="line">&gt;&lt;/van-checkbox&gt;</span><br><span class="line"></span><br><span class="line">#1.2 结算区域的数据绑定</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;jiesuan&quot;</span> slot=<span class="string">&quot;header&quot;</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;left&quot;</span>&gt;</span><br><span class="line">          &lt;p&gt;总计&#123;&#123;$store.getters.getAllGoodCount&#125;&#125;件&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            已勾选</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;red&quot;</span>&gt;&#123;&#123;$store.getters.getGoodsCountAndAmount.count&#125;&#125;&lt;/span&gt; 件，总价</span><br><span class="line">            &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;red&quot;</span>&gt;￥&#123;&#123;$store.getters.getGoodsCountAndAmount.amount&#125;&#125;&lt;/span&gt;</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;van-button type=<span class="string">&quot;danger&quot;</span>&gt;去结算&lt;/van-button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">#1.3 switch被点击后，调用store中的updateGoodsSelected方法更新数据</span><br><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      checked: <span class="literal">true</span>,</span><br><span class="line">      buynum: <span class="number">1</span>,</span><br><span class="line">      goodslist: [],</span><br><span class="line">      <span class="comment">//将vuex的getters保持一份</span></span><br><span class="line">      itemSelected: <span class="built_in">this</span>.$store.getters.getGoodsSelected</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">    <span class="function"><span class="title">itemSelectedChanged</span>(<span class="params">isSelected, id</span>)</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.$store.commit(<span class="string">&quot;updateGoodsSelected&quot;</span>, &#123;</span><br><span class="line">            id: id,</span><br><span class="line">            selected: isSelected</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">#2.store/index.js</span><br><span class="line"><span class="keyword">var</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        car: car</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        ......</span><br><span class="line">        <span class="function"><span class="title">updateGoodsSelected</span>(<span class="params">state, info</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.getters.getGoodsSelected);</span><br><span class="line">            state.car.some(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (item.id == info.id) &#123;</span><br><span class="line">                    item.selected = info.selected</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    getters: &#123;</span><br><span class="line">        .....      </span><br><span class="line">        <span class="function"><span class="title">getGoodsSelected</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> o = &#123;&#125;</span><br><span class="line">            state.car.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                o[item.id] = item.selected</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">return</span> o</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">getGoodsCountAndAmount</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> o = &#123;</span><br><span class="line">                count: <span class="number">0</span>, <span class="comment">// 勾选的数量</span></span><br><span class="line">                amount: <span class="number">0</span> <span class="comment">// 勾选的总价</span></span><br><span class="line">            &#125;</span><br><span class="line">            state.car.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (item.selected) &#123;</span><br><span class="line">                    o.count += item.count</span><br><span class="line">                    o.amount += item.price * item.count</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">return</span> o</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-10-路由元数据、返回按钮"><a href="#1-3-10-路由元数据、返回按钮" class="headerlink" title="1.3.10 路由元数据、返回按钮"></a>1.3.10 路由元数据、返回按钮</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line">#1.router/index.js</span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入对应的路由组件</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&quot;../views/Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Member <span class="keyword">from</span> <span class="string">&quot;../views/Member.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Cart <span class="keyword">from</span> <span class="string">&quot;../views/Cart.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Search <span class="keyword">from</span> <span class="string">&quot;../views/Search.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> NewsList <span class="keyword">from</span> <span class="string">&#x27;../views/news/NewsList.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> NewsInfo <span class="keyword">from</span> <span class="string">&#x27;../views/news/NewsInfo.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> PhotoList <span class="keyword">from</span> <span class="string">&#x27;../views/photos/PhotoList.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> PhotoInfo <span class="keyword">from</span> <span class="string">&#x27;../views/photos/PhotoInfo.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> GoodList <span class="keyword">from</span> <span class="string">&#x27;../views/good/GoodList.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> GoodInfo <span class="keyword">from</span> <span class="string">&#x27;../views/good/GoodInfo.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> GoodDesc <span class="keyword">from</span> <span class="string">&#x27;../views/good/GoodDesc.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 创建路由对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      component: Home,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;无锡极客营&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/member&quot;</span>,</span><br><span class="line">      component: Member,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;会员中心&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/cart&quot;</span>,</span><br><span class="line">      component: Cart,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;购物车&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/search&quot;</span>,</span><br><span class="line">      component: Search,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;搜索中心&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/newsList&#x27;</span>,</span><br><span class="line">      component: NewsList,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;新闻列表&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/newsInfo/:id&#x27;</span>,</span><br><span class="line">      component: NewsInfo,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;新闻详情&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/photoList&#x27;</span>,</span><br><span class="line">      component: PhotoList,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;图片列表&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/photoInfo/:id&#x27;</span>,</span><br><span class="line">      component: PhotoInfo,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;图片详情&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&quot;/goodList&quot;</span>,</span><br><span class="line">      component: GoodList,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;商品列表&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/goodInfo/:id&#x27;</span>,</span><br><span class="line">      component: GoodInfo,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;商品信息&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; </span><br><span class="line">      path: <span class="string">&#x27;/goodDesc/:id&#x27;</span>, </span><br><span class="line">      component:GoodDesc, </span><br><span class="line">      name:<span class="string">&#x27;goodDesc&#x27;</span>,</span><br><span class="line">      meta:&#123;</span><br><span class="line">        title:<span class="string">&quot;商品详情&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">#2.App.vue</span><br><span class="line">  &lt;van-nav-bar :title=<span class="string">&quot;$route.meta.title&quot;</span> fixed @click-left=<span class="string">&quot;leftClicked&quot;</span>&gt;</span><br><span class="line">      &lt;van-icon name=<span class="string">&quot;arrow-left&quot;</span> slot=<span class="string">&quot;left&quot;</span> v-<span class="keyword">if</span>=<span class="string">&quot;flag&quot;</span>/&gt;</span><br><span class="line">  &lt;/van-nav-bar&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      active: <span class="number">0</span>,</span><br><span class="line">      <span class="comment">//用于控制返回按钮是否需要显示</span></span><br><span class="line">      flag: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">leftClicked</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$router.go(-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    <span class="comment">//控制返回按钮是否需要显示的</span></span><br><span class="line">    <span class="string">&quot;$route.path&quot;</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newVal, oldVal</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        newVal == <span class="string">&quot;/&quot;</span> ||</span><br><span class="line">        newVal == <span class="string">&quot;/member&quot;</span> ||</span><br><span class="line">        newVal == <span class="string">&quot;/cart&quot;</span> ||</span><br><span class="line">        newVal == <span class="string">&quot;/search&quot;</span></span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="built_in">this</span>.flag = <span class="literal">false</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flag = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-11-路由懒加载"><a href="#1-3-11-路由懒加载" class="headerlink" title="1.3.11 路由懒加载"></a>1.3.11 路由懒加载</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#router/index.js</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入对应的路由组件</span></span><br><span class="line"><span class="keyword">const</span> Home = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Home.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> Member = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Member.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> Cart = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Cart.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> Search = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Search.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> NewsList = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/news/NewsList.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> NewsInfo = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/news/NewsInfo.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> PhotoList = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/photos/PhotoList.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> PhotoInfo = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/photos/PhotoInfo.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> GoodList = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/good/GoodList.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> GoodInfo = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/good/GoodInfo.vue&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> GoodDesc = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/good/GoodDesc.vue&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-12-vue-cli中的按需导入"><a href="#1-3-12-vue-cli中的按需导入" class="headerlink" title="1.3.12 vue/cli中的按需导入"></a>1.3.12 vue/cli中的按需导入</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#1.安装babel-plugin-import 插件</span><br><span class="line">npm i babel-plugin-<span class="keyword">import</span> -D</span><br><span class="line"></span><br><span class="line">#2.修改babel.config.js文件</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  plugins: [</span><br><span class="line">    [<span class="string">&#x27;import&#x27;</span>, &#123;</span><br><span class="line">      libraryName: <span class="string">&#x27;vant&#x27;</span>,</span><br><span class="line">      libraryDirectory: <span class="string">&#x27;es&#x27;</span>,</span><br><span class="line">      style: <span class="literal">true</span></span><br><span class="line">    &#125;, <span class="string">&#x27;vant&#x27;</span>]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#3.修改main.js  注释掉import Vant from &#x27;vant&#x27;      Vue.use(Vant)</span><br><span class="line"><span class="comment">//1.引入Vant UI</span></span><br><span class="line"><span class="comment">// import Vant from &#x27;vant&#x27;;</span></span><br><span class="line"><span class="comment">// Vue.use(Vant);</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;vant/lib/index.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; NavBar, </span><br><span class="line">  Tabbar, </span><br><span class="line">  TabbarItem, </span><br><span class="line">  Button, </span><br><span class="line">  GoodsActionIcon, </span><br><span class="line">  GoodsAction,</span><br><span class="line">  GoodsActionButton,</span><br><span class="line">  Swipe, </span><br><span class="line">  SwipeItem, </span><br><span class="line">  Grid, </span><br><span class="line">  GridItem,</span><br><span class="line">  Icon,</span><br><span class="line">  List,</span><br><span class="line">  Cell, </span><br><span class="line">  CellGroup,</span><br><span class="line">  Skeleton,</span><br><span class="line">  Panel,</span><br><span class="line">  Form,</span><br><span class="line">  Field,</span><br><span class="line">  Tab, </span><br><span class="line">  Tabs,</span><br><span class="line">  Toast,</span><br><span class="line">  Stepper,</span><br><span class="line">  Checkbox,</span><br><span class="line">  Image</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;vant&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(NavBar);</span><br><span class="line">Vue.use(Tabbar);</span><br><span class="line">Vue.use(TabbarItem);</span><br><span class="line">Vue.use(Button);</span><br><span class="line">Vue.use(GoodsActionIcon);</span><br><span class="line">Vue.use(GoodsAction);</span><br><span class="line">Vue.use(GoodsActionButton);</span><br><span class="line">Vue.use(Swipe);</span><br><span class="line">Vue.use(SwipeItem);</span><br><span class="line">Vue.use(Grid);</span><br><span class="line">Vue.use(GridItem);</span><br><span class="line">Vue.use(Icon);</span><br><span class="line">Vue.use(List);</span><br><span class="line">Vue.use(Cell);</span><br><span class="line">Vue.use(CellGroup);</span><br><span class="line">Vue.use(Skeleton);</span><br><span class="line">Vue.use(Panel);</span><br><span class="line">Vue.use(Form);</span><br><span class="line">Vue.use(Field);</span><br><span class="line">Vue.use(Tab);</span><br><span class="line">Vue.use(Tabs);</span><br><span class="line">Vue.use(Toast);</span><br><span class="line">Vue.use(Stepper);</span><br><span class="line">Vue.use(Checkbox);</span><br><span class="line">Vue.use(Image);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-3-13-移动端适配"><a href="#1-3-13-移动端适配" class="headerlink" title="1.3.13 移动端适配"></a>1.3.13 移动端适配</h3><pre><code>postcss可以被理解为一个平台，可以让一些插件在上面跑。它提供了一个解析器，可以将CSS解析成抽象语法树。通过PostCSS这个平台，我们能够开发一些插件，来处理CSS。热门插件如autoprefixer</code></pre>
<h4 id="a-使用flexible和-postcss-px2rem"><a href="#a-使用flexible和-postcss-px2rem" class="headerlink" title="a) 使用flexible和 postcss-px2rem"></a>a) 使用flexible和 postcss-px2rem</h4><pre><code>之前使用rem适配的思路：使用媒体查询，确定不同屏幕下html标签的font-size  (即1rem单位)，然后在写css样式的时候，就可以使用1rem , 2rem这样的单位来做适配了。

但是这种适配的问题是需要手动把px单位换算成rem单位，比较麻烦。对应的，我们可以使用flexible和 postcss-px2rem来解决这个问题</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.安装flexible。 flexible主要是实现在各种不同的移动端界面实现一稿搞定所有的设备兼容自适应问题</span></span><br><span class="line">npm install lib-flexible --save</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.main.js引入flexible</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;lib-flexible&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//此时运行程序会看到html中自动加上了font-size    font-size的默认值为viewport的十分之一</span></span><br><span class="line"><span class="comment">//在页面中引入flexible.js后，flexible会在&lt;html&gt;标签上增加一个data-dpr属性和font-size样式（如下图）。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548327621203.png" alt="1548327621203"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.安装postcss-pxtorem</span></span><br><span class="line">npm install postcss-pxtorem --save-dev</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.修改postcss.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: &#123;</span><br><span class="line">    <span class="comment">//autoprefixer 自动补全css前缀的东西</span></span><br><span class="line">    <span class="string">&#x27;autoprefixer&#x27;</span>: &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class="line">      rootValue: <span class="number">37.5</span>, <span class="comment">//换算基数，一般和html的font-size一致</span></span><br><span class="line">      propList: [<span class="string">&#x27;*&#x27;</span>]  <span class="comment">//哪些css属性需要换算</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548328057624.png" alt="1548328057624"></p>
<h2 id="1-4-手机调试"><a href="#1-4-手机调试" class="headerlink" title="1.4 手机调试"></a>1.4 手机调试</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#1.保证客户端和服务器在同一网段下</span><br><span class="line"></span><br><span class="line">#2.修改vue.config.js中的devServer</span><br><span class="line"></span><br><span class="line">devServer: &#123;</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    host: <span class="string">&#x27;192.168.0.101&#x27;</span>,</span><br><span class="line">    port: <span class="number">3000</span>,</span><br><span class="line">    https: <span class="literal">false</span>,</span><br><span class="line">    hotOnly: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//配置代理服务器</span></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="comment">//凡是请求以api开头的都会使用下面的代理服务器</span></span><br><span class="line">      <span class="string">&#x27;/api/*&#x27;</span>: &#123;</span><br><span class="line">        target: <span class="string">&#x27;http://localhost:8899/&#x27;</span>, <span class="comment">// 目标服务器地址</span></span><br><span class="line">        secure: <span class="literal">false</span>,                    <span class="comment">// 目标服务器地址是否是安全协议</span></span><br><span class="line">        changeOrigin: <span class="literal">true</span>,               <span class="comment">// 是否修改来源, 为true时会让目标服务器以为是webpack-dev-server发出的请求!服务端和服务端的请求是没有跨域的</span></span><br><span class="line">        <span class="comment">//pathRewrite: &#123;&#x27;^/api&#x27;: &#x27;/&#x27;&#125;     // 将/api开头的请求地址, /api 改为 /, 即 /api/xx 改为 /xx</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="1-5-断点调试"><a href="#1-5-断点调试" class="headerlink" title="1.5 断点调试"></a>1.5 断点调试</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#需要断点调试的地图添加debugger代码</span><br><span class="line"><span class="keyword">debugger</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1548060310388.png" alt="1548060310388"></p>
<h2 id="1-6-项目打包构建"><a href="#1-6-项目打包构建" class="headerlink" title="1.6 项目打包构建"></a>1.6 项目打包构建</h2><h3 id="1-6-1-打包运行"><a href="#1-6-1-打包运行" class="headerlink" title="1.6.1 打包运行"></a>1.6.1 打包运行</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>使用webpack命令打包项目，将打包后的文件(dist)拷贝到D:/code下</span><br><span class="line">  注意：Vue.config.js中devServer代码也不需要修改，因为一旦打包之后，devServer就没有用了</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>修改httpd.conf配置文件</span><br><span class="line">  取消v-host文件的注释</span><br><span class="line">  配置监听的端口：不要用<span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>配置httpd-vhost.conf文件</span><br><span class="line">   &lt;VirtualHost *:<span class="number">8888</span>&gt;</span><br><span class="line">        #绑定域名</span><br><span class="line">        ServerName  vuecms.io</span><br><span class="line">        #默认首页</span><br><span class="line">        DirectoryIndex index.html index.php</span><br><span class="line">        #指定网站根目录</span><br><span class="line">        DocumentRoot <span class="string">&quot;D:/code2&quot;</span></span><br><span class="line">        #指定目录分配权限</span><br><span class="line">        &lt;Directory <span class="string">&quot;D:/code2&quot;</span>&gt;</span><br><span class="line">            #没有首页就显示列表（开发阶段可以这样）取值：all none Index</span><br><span class="line">            Options Indexes</span><br><span class="line">            #规定Deny,Allow的执行顺序, Order Deny,Allow ： 先执行Deny，再执行Allow</span><br><span class="line">            Order Deny,Allow</span><br><span class="line">            #全部禁止访问 取值：all none 指定ip</span><br><span class="line">            Allow <span class="keyword">from</span> All</span><br><span class="line">            #但是，允许自己访问  取值：all none 指定ip</span><br><span class="line">            Allow <span class="keyword">from</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">    &lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>配置hosts文件</span><br><span class="line">	<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>       vuecms.io</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>重启apache服务，浏览器输入网址访问</span><br><span class="line">   http:<span class="comment">//vuecms.io:8888/#/home</span></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> 浏览器输入 http:<span class="comment">//vuecms.io:8888来访问vue打包后的项目，发现空白页面</span></span><br><span class="line"></span><br><span class="line">   原因是在vue.config.js中我们配置了发布路径是：</span><br><span class="line">   publicPath: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span></span><br><span class="line">      ? <span class="string">&#x27;/cli-study/dist&#x27;</span></span><br><span class="line">      : <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line"></span><br><span class="line">   所以我们需要将<span class="keyword">static</span>目录放到cli-study/dist目录下</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span> 浏览器再次输入 http:<span class="comment">//vuecms.io:8888 发现可以访问vue项目了</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="1-6-2-项目发布后跨域请求的问题"><a href="#1-6-2-项目发布后跨域请求的问题" class="headerlink" title="1.6.2 项目发布后跨域请求的问题"></a>1.6.2 项目发布后跨域请求的问题</h3><p>浏览器输入 <a target="_blank" rel="noopener" href="http://vuecms.io:8888/">http://vuecms.io:8888</a> 发现可以访问项目，但是图片轮播的数据没有，分析如下：</p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659660768.png" alt="1562659660768"></p>
<p>我们尝试去修改myaxios.js，添加如下代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV == <span class="string">&#x27;development&#x27;</span>) &#123;    </span><br><span class="line">    axios.defaults.baseURL = <span class="string">&#x27;&#x27;</span>;<span class="comment">//开发环境</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (process.env.NODE_ENV == <span class="string">&#x27;production&#x27;</span>) &#123;    </span><br><span class="line">    axios.defaults.baseURL = <span class="string">&#x27;http://192.168.32.2:8899/&#x27;</span>;<span class="comment">//生产环境</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>接下我们发现出现如下问题：</p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659675821.png" alt="1562659675821"></p>
<p> 为什么会出现如上问题呢？分析如下：</p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659691462.png" alt="1562659691462"></p>
<h3 id="1-6-3-配置Apache的反向代理解决跨域请求"><a href="#1-6-3-配置Apache的反向代理解决跨域请求" class="headerlink" title="1.6.3 配置Apache的反向代理解决跨域请求"></a>1.6.3 配置Apache的反向代理解决跨域请求</h3><p>a) 修改apache下的httpd.conf配置文件</p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659850480.png" alt="1562659850480"></p>
<p> b) 修改apache下的extra下的vhost.conf配置文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:<span class="number">8888</span>&gt;</span><br><span class="line">    #绑定域名</span><br><span class="line">    ServerName vuecms.io</span><br><span class="line">    #默认首页</span><br><span class="line">    DirectoryIndex index.html index.php</span><br><span class="line">    #指定网站根目录</span><br><span class="line">    DocumentRoot <span class="string">&quot;D:/code2&quot;</span></span><br><span class="line">    #指定目录分配权限</span><br><span class="line">    &lt;Directory <span class="string">&quot;D:/code2&quot;</span>&gt;</span><br><span class="line">        #没有首页就显示列表（开发阶段可以这样）取值：all none Index</span><br><span class="line">        Options Indexes</span><br><span class="line">        #规定Deny,Allow的执行顺序, Order Deny,Allow ： 先执行Deny，再执行Allow</span><br><span class="line">        Order Deny,Allow</span><br><span class="line">        #全部禁止访问 取值：all none 指定ip</span><br><span class="line">        Allow <span class="keyword">from</span> All</span><br><span class="line">        #但是，允许自己访问  取值：all none 指定ip</span><br><span class="line">        Allow <span class="keyword">from</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">	Proxyrequests off</span><br><span class="line">	&lt;<span class="built_in">Proxy</span> *&gt;</span><br><span class="line">		#规定Deny,Allow的执行顺序, Order Deny,Allow ： 先执行Deny，再执行Allow</span><br><span class="line">        Order Deny,Allow</span><br><span class="line">        #全部禁止访问 取值：all none 指定ip</span><br><span class="line">        Allow <span class="keyword">from</span> All</span><br><span class="line">	&lt;/<span class="built_in">Proxy</span>&gt;</span><br><span class="line">        #配置反向代理</span><br><span class="line">		ProxyPass /api http:<span class="comment">//192.168.32.2:8899/api</span></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  c) 重启apache服务器</p>
<p>  d) 删除掉之前myaxios.js中的下面代码，然后重新npm run build ，然后将build后的代码再次拷贝到D:code2目录下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV == <span class="string">&#x27;development&#x27;</span>) &#123;    </span><br><span class="line">    axios.defaults.baseURL = <span class="string">&#x27;&#x27;</span>;<span class="comment">//开发环境</span></span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (process.env.NODE_ENV == <span class="string">&#x27;production&#x27;</span>) &#123;    </span><br><span class="line">    axios.defaults.baseURL = <span class="string">&#x27;http://192.168.32.2:8899/&#x27;</span>;<span class="comment">//生产环境</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  e) 重启数据服务器  node app</p>
<p>  f)  浏览器再次输入 <a target="_blank" rel="noopener" href="http://vuecms.io:8888/">http://vuecms.io:8888</a> 此时发现项目可以正常访问了</p>
<p>   <img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562659946234.png" alt="1562659946234"></p>
<h3 id="1-6-4-开启Apache的gzip压缩"><a href="#1-6-4-开启Apache的gzip压缩" class="headerlink" title="1.6.4 开启Apache的gzip压缩"></a>1.6.4 开启Apache的gzip压缩</h3><p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1545632333540.png" alt="1545632333540"></p>
<p>有时候我们想要尽可能的 减少服务器返回的文件的体积，我们可以开启apache的压缩功能。</p>
<p>要让apache支持gzip功能，要用到deflate_Module和headers_Module。打开apache的配置文件httpd.conf，大约在105行左右，找到以下两行内容：（这两行不是连续在一起的）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#LoadModule deflate_module modules/mod_deflate.so</span><br><span class="line">#LoadModule headers_module modules/mod_headers.so</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>然后将其前面的“#”注释删掉，表示开启gzip压缩功能。开启以后还需要进行相关配置。在httpd.conf文件的最后添加以下内容即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule deflate_module&gt;</span><br><span class="line">    #必须的，就像一个开关一样，告诉apache对传输到浏览器的内容进行压缩</span><br><span class="line">    SetOutputFilter DEFLATE</span><br><span class="line">    DeflateCompressionLevel <span class="number">9</span></span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>最少需要加上以上内容，才可以生gzip功能生效。由于没有做其它的额外配置，所以其它相关的配置均使用Apache的默认设置。这里说一下参数“DeflateCompressionLevel”，它表示压缩级别，值从1到9，值越大表示压缩的越厉害。</p>
<p>重启apache服务。</p>
<p>压缩过后再去访问主页，接下来可以发现原文件2.1M实际只传输了423KB。</p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1545632442993.png" alt="1545632442993"></p>
<h3 id="1-6-5-使用ngrok将本机映射为一个外网的Web服务器"><a href="#1-6-5-使用ngrok将本机映射为一个外网的Web服务器" class="headerlink" title="1.6.5 使用ngrok将本机映射为一个外网的Web服务器"></a>1.6.5 使用ngrok将本机映射为一个外网的Web服务器</h3><p>ngrok：作用可以将一个本地端口映射为一个远程端口</p>
<p>打开ngrok命令，输入ngrok http 80</p>
<p>注意：由于默认使用的美国的服务器进行中间转接，所以访问速度超级慢，访问时可启用翻墙软件，提高网页打开速度！</p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1545633027495.png" alt="1545633027495"></p>
<h2 id="1-7-将Vue项目打包成apk"><a href="#1-7-将Vue项目打包成apk" class="headerlink" title="1.7 将Vue项目打包成apk"></a>1.7 将Vue项目打包成apk</h2><blockquote>
<p>使用工具 HBuilder<br>Html5+  =  html5 + runtime(运行时环境提供了访问设备底层api的能力)</p>
</blockquote>
<p>1.修改vue.config.js中的publicPath   解决直接在浏览器打开index.html找不到资源路径的问题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">publicPath: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span></span><br><span class="line">      ? <span class="string">&#x27;./cli-study/dist&#x27;</span></span><br><span class="line">      : <span class="string">&#x27;/&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.修改tools下的myaxios</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.baseURL &#x3D; &quot;http:&#x2F;&#x2F;192.168.32.2:8899&quot;;</span><br><span class="line"></span><br><span class="line">之前我们说使用js代码去发送网络请求ajax的时候会有跨域访问的问题      </span><br><span class="line">跨域访问：协议、域名、端口号有任何一个不一致的时候就会存在跨域访问的问题       </span><br><span class="line">当我们的web应用打包成app的时候就没有跨域访问问题了   </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.运行npm run build打包</p>
<p>4.打开hbuilder，创建一个移动App</p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562834131072.png" alt="1562834131072"></p>
<p> 5.配置manifest.json文件</p>
<p> 6.项目右键–&gt;发行  进行打包</p>
<p><img src="D:/极客营/资料/16.VUE项目/16.VUE项目/readme/assets/1562834221839.png" alt="1562834221839"></p>
<p>  7.将打包后的apk拷贝到手机中进行安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">注意：Hbuilder在打包的时候使用的是云打包(在线打包)，不需要配置本地安卓环境</span><br><span class="line">原理：将我们的代码上传到hbuilder服务器，然后再hbuilder服务器中进行打包(源代码泄露的风险)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/04/10/vue-cli/" data-id="cki48g0z20002egvs9lz52hex" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue%E9%A1%B9%E7%9B%AE/" rel="tag">vue项目</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/04/20/vue-element-admin/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          vue-element-admin
        
      </div>
    </a>
  
  
    <a href="/2019/07/30/h5c3/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">h5c3</div>
    </a>
  
</nav>

  
</article>



</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">izhichu的博客</h1>
    <h2 class="blog-subtitle"></h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://avatars0.githubusercontent.com/u/20333903?v=3&amp;s=460">
    <h2 class="author">izhichu</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>4</strong><br>文章</div></a>
      <a href="/categories"><div><strong>0</strong><br>分类</div></a>
      <a href="/tags"><div><strong>4</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="http://github.com/ShanaMaid" target="_blank" title="Github">
          Github
        </a>
      
    </div>

    <div class="friend-link">
      <h2>友情链接</h2>
      
        <a class="hvr-bounce-in" href="http://blog.shanamaid.top/" target="_blank" title="ShanaMaid">
          ShanaMaid
        </a>
      
    </div>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2019 - 2020 izhichu<br>
      由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动 | 
      主题-<a target="_blank" rel="noopener" href="https://github.com/ShanaMaid/hexo-theme-shana">Shana</a>
      
    </div>
    
  </div>
</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  
<link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">

  
<script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>




  
<link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">

  
<script src="/plugin/galmenu/GalMenu.js"></script>

  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">首页</a>
          
            <a href="/tags" title="" class="menuItem">标签</a>
          
            <a href="/categories" title="" class="menuItem">分类</a>
          
            <a href="/archives" title="" class="menuItem">归档</a>
          
            <a href="/xxxxxxxxx" title="" class="menuItem">xxx</a>
          
            <a href="/xxxxxxx" title="" class="menuItem">xxxx</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>

<script src="/js/script.js"></script>




  </div>
</body>
</html>